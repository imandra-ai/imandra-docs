<!DOCTYPE html>
<html>
    <head><meta charset="utf-8" />
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <title>Imandra Documentation - Proving Program Termination with Imandra</title>
        <meta property="og:url" content="https://docs.imandra.ai/imandra-docs/notebooks/proving-program-termination/">
        <meta property="og:type" content="website">
        <meta property="og:title" content="Imandra Documentation - Proving Program Termination with Imandra">
        <meta property="og:description" content="In this notebook, we'll walk through how Imandra can be used to analyse program termination. Along the way, we'll learn about soundness, conservative extensions, the Halting Problem, ordinals and well-founded orderings, path-guarded call-graphs, measure conjectures and more.">
        <meta property="og:image" content="https://storage.googleapis.com/imandra-assets/images/og_image_default_i78.jpg">


        
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-116937440-6"></script>
        <script>
         window.dataLayer = window.dataLayer || [];
         function gtag(){dataLayer.push(arguments);}
         gtag('js', new Date());

         gtag('config', 'UA-116937440-1');
        </script>
        <script type="text/javascript"> var sc_project=11767520; var sc_invisible=1; var sc_security="fa7e88d1"; </script>
        <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>
        <noscript><div class="statcounter">
            <a title="Web Analytics" href="http://statcounter.com/" target="_blank">
                <img class="statcounter" src="//c.statcounter.com/11767520/0/fa7e88d1/1/" alt="Web Analytics"></a>
        </div></noscript>
        

        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather+Sans:300,300i,400,400i%7CMerriweather:300,300i,400,400i%7CRoboto+Slab:300,300i,400,400i">

        <link rel="stylesheet" href="/imandra-docs/static/style/style.min.00fae21a.css" type="text/css">
        <link rel="stylesheet" href="/imandra-docs/static/nbextensions/nbimandra/styles.b466ce6f.css" type="text/css">
        <link rel="stylesheet" href="/imandra-docs/static/docs-styles.b9de737f.css" type="text/css">
        
        <link rel="stylesheet" href="/imandra-docs/static/jekyll-styles.b90b2485.css" type="text/css">
        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
        <script src="/imandra-docs/static/nbimandra-rjs-bundle.b85e58fd.js"></script>

        <style type="text/css">
         .highlight .hll { background-color: #ffffcc }
         .highlight  { background: #f8f8f8; }
         .highlight .c { color: #408080; font-style: italic } /* Comment */
         .highlight .err { border: 1px solid #FF0000 } /* Error */
         .highlight .k { color: #008000; font-weight: bold } /* Keyword */
         .highlight .o { color: #666666 } /* Operator */
         .highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
         .highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
         .highlight .cp { color: #BC7A00 } /* Comment.Preproc */
         .highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
         .highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
         .highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
         .highlight .gd { color: #A00000 } /* Generic.Deleted */
         .highlight .ge { font-style: italic } /* Generic.Emph */
         .highlight .gr { color: #FF0000 } /* Generic.Error */
         .highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
         .highlight .gi { color: #00A000 } /* Generic.Inserted */
         .highlight .go { color: #888888 } /* Generic.Output */
         .highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
         .highlight .gs { font-weight: bold } /* Generic.Strong */
         .highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
         .highlight .gt { color: #0044DD } /* Generic.Traceback */
         .highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
         .highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
         .highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
         .highlight .kp { color: #008000 } /* Keyword.Pseudo */
         .highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
         .highlight .kt { color: #B00040 } /* Keyword.Type */
         .highlight .m { color: #666666 } /* Literal.Number */
         .highlight .s { color: #BA2121 } /* Literal.String */
         .highlight .na { color: #7D9029 } /* Name.Attribute */
         .highlight .nb { color: #008000 } /* Name.Builtin */
         .highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
         .highlight .no { color: #880000 } /* Name.Constant */
         .highlight .nd { color: #AA22FF } /* Name.Decorator */
         .highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
         .highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
         .highlight .nf { color: #0000FF } /* Name.Function */
         .highlight .nl { color: #A0A000 } /* Name.Label */
         .highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
         .highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
         .highlight .nv { color: #19177C } /* Name.Variable */
         .highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
         .highlight .w { color: #bbbbbb } /* Text.Whitespace */
         .highlight .mb { color: #666666 } /* Literal.Number.Bin */
         .highlight .mf { color: #666666 } /* Literal.Number.Float */
         .highlight .mh { color: #666666 } /* Literal.Number.Hex */
         .highlight .mi { color: #666666 } /* Literal.Number.Integer */
         .highlight .mo { color: #666666 } /* Literal.Number.Oct */
         .highlight .sa { color: #BA2121 } /* Literal.String.Affix */
         .highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
         .highlight .sc { color: #BA2121 } /* Literal.String.Char */
         .highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
         .highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
         .highlight .s2 { color: #BA2121 } /* Literal.String.Double */
         .highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
         .highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
         .highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
         .highlight .sx { color: #008000 } /* Literal.String.Other */
         .highlight .sr { color: #BB6688 } /* Literal.String.Regex */
         .highlight .s1 { color: #BA2121 } /* Literal.String.Single */
         .highlight .ss { color: #19177C } /* Literal.String.Symbol */
         .highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
         .highlight .fm { color: #0000FF } /* Name.Function.Magic */
         .highlight .vc { color: #19177C } /* Name.Variable.Class */
         .highlight .vg { color: #19177C } /* Name.Variable.Global */
         .highlight .vi { color: #19177C } /* Name.Variable.Instance */
         .highlight .vm { color: #19177C } /* Name.Variable.Magic */
         .highlight .il { color: #666666 } /* Literal.Number.Integer.Long */
        </style>

        <!-- Loading mathjax macro -->
        <!-- Load mathjax -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS_HTML"></script>
    <!-- MathJax configuration -->
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>
    <!-- End of mathjax configuration --><script>
  function handleCopyClick() {
      var el = this;
      var terminal = el.closest('.terminal');
      var highlight = terminal.getElementsByClassName('highlight')[0];
      copyToClipboardMsg(highlight);

      terminal.classList.add('terminal--hide');
      setTimeout(function () {
          terminal.classList.remove('terminal--hide');
      }, 2000);


      function copyToClipboardMsg(elem) {
          var succeed = copyToClipboard(elem);
          var msg;
          if (!succeed) {
              msg = 'Error!';
          } else {
              msg = 'Copied!';
          }

          var msgElem = terminal.querySelector('.terminal__copy-msg');
          msgElem.innerHTML = msg;
          setTimeout(function () {
              msgElem.innerHTML = 'You rock!';
          }, 1000);
      }

      function copyToClipboard(elem) {
          // create hidden text element, if it doesn't already exist
          var targetId = '_hiddenCopyText_';
          var isInput = elem.tagName === 'INPUT' || elem.tagName === 'TEXTAREA';
          var origSelectionStart, origSelectionEnd;
          if (isInput) {
              // can just use the original source element for the selection and copy
              target = elem;
              origSelectionStart = elem.selectionStart;
              origSelectionEnd = elem.selectionEnd;
          } else {
              // must use a temporary form element for the selection and copy
              target = terminal.querySelector('#' + targetId);
              if (!target) {
                  var target = document.createElement('textarea');
                  // target.style.display = 'flex';
                  // target.style.position = 'absolute';
                  // target.style.left = '-1000%';
                  target.id = targetId;
                 elem.appendChild(target);
              }
              target.textContent = elem.textContent.trim();
          }

          // select the content
          var currentFocus = document.activeElement;
          target.focus();
          target.setSelectionRange(0, target.value.length);

          // copy the selection
          var succeed;
          try {
              succeed = document.execCommand('copy');
          } catch (e) {
              succeed = false;
          }
          // restore original focus
          if (currentFocus && typeof currentFocus.focus === 'function') {
              currentFocus.focus();
          }

          if (isInput) {
              // restore prior selection
              elem.setSelectionRange(origSelectionStart, origSelectionEnd);
          } else {
              // clear temporary content
              elem.removeChild(target);
          }
          return succeed;
      }
  }
</script>
    </head>
    <body>
        <div class="background">
        </div>
        <div class="page-container">
            <main class="main-content-column">
                <!-- Jupyter (Imandra core docs) version -->
<header class="header">
    <div class="top-row-container">
        <div class="top-row">

            <div id="toggler--left" class="side__left-menu-toggler">
                <div class="side__toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <p class="side__toggle-text">Docs</p>
            </div>

            <div class="side__logo-container">
                <a class="side__logo-link" href="/">
                    <img class="side__logo " src = "/imandra-docs/jekyll-resources/assets/img/imandra-gradient-logo-docs.svg" alt="Imandra Logo" title="Imandra Logo">
                    <img class="side__logo--min " src="/imandra-docs/jekyll-resources/assets/img/imandra-gradient-logo-min.svg" alt="Imandra Logo" title="Imandra Logo">

                </a>
            </div>

            <div id="toggler--right" class="side__right-menu-toggler">
                <p class="side__toggle-text">Pages</p>
                <div class="side__toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>

            <nav id="side-nav-menu" class="side__nav-container side__nav-container--hidden">
                <ul class="side__nav-list">
                    
                    <li class="side__nav-list-item">
                        <a class="side__nav-link" href="/">Documentation Home</a>
                        
                    </li>
                    
                    <li class="side__nav-list-item">
                        <a class="side__nav-link side__nav-link--active" href="/imandra-docs">Imandra Core</a>
                        
                        <ul class="side__nav-list--sub-level-1">
                            
                            <li class="side__nav-list-item--sub-level-1 side__nav-list--sub-level-1--empty">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/welcome">A Quick Tour</a>
                                
                                <ul class="side__nav-list--sub-level-2 ">
                                    
                                </ul>
                                
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1 ">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/installation">Installation</a>
                                
                                <ul class="side__nav-list--sub-level-2 ">
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/installation-simple">Installer</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/installation-manual-opam">Manual (opam)</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/installation-docker">Docker Image</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/installation-jupyter">Jupyter Notebook</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/installation-vscode">VSCode</a>
                                        
                                        
                                        
                                    </li>
                                    
                                </ul>
                                
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1 side__nav-list--sub-level-1--empty">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/logic-and-program-modes">Logic and Program Modes</a>
                                
                                <ul class="side__nav-list--sub-level-2 ">
                                    
                                </ul>
                                
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1 ">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/verification">Verification</a>
                                
                                <ul class="side__nav-list--sub-level-2 ">
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/verification-commands">Commands</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/verification-attributes">Attributes</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/verification-unrolling">Unrolling</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/verification-simplification">Simplification</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/verification-blast">Blast</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/verification-induction">Induction</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/verification-waterfall">Waterfall</a>
                                        
                                        
                                        
                                    </li>
                                    
                                </ul>
                                
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1 side__nav-list--sub-level-1--empty">
                                
                                <a class="side__nav-link side__nav-link--active" href="/imandra-docs/notebooks/proving-program-termination">Proving Program Termination</a>
                                
                                <ul class="side__nav-list--sub-level-2  side__nav-list--sub-level-2--active">
                                    
                                </ul>
                                
                                <div class="side__within-page-nav--sub-level-1">
                                
  
  
  
  <a class="side__nav-link--within-page side__nav-link--within-page--h2" href="#Inconsistent-non-terminating-functions">Inconsistent non-terminating functions</a>
  
  
  
  <a class="side__nav-link--within-page side__nav-link--within-page--h2" href="#Soundness,-Consistency-and-Conservative-Extensions">Soundness, Consistency and Conservative Extensions</a>
  
  
  
  <a class="side__nav-link--within-page side__nav-link--within-page--h2" href="#Termination-ensures-existence">Termination ensures existence</a>
  
  
  
  <a class="side__nav-link--within-page side__nav-link--within-page--h2" href="#Let's-get-our-hands-dirty">Let's get our hands dirty</a>
  
  
  
  <a class="side__nav-link--within-page side__nav-link--within-page--h1" href="#Structural-Recursions">Structural Recursions</a>
  
  
  
  <a class="side__nav-link--within-page side__nav-link--within-page--h1" href="#Ackermann-and-Admission-Hints">Ackermann and Admission Hints</a>
  
  
  
  <a class="side__nav-link--within-page side__nav-link--within-page--h2" href="#Lexicographic-termination-(up-to-$\omega^\omega$)">Lexicographic termination (up to $\omega^\omega$)</a>
  
  
  
  <a class="side__nav-link--within-page side__nav-link--within-page--h1" href="#Measures-and-Ordinals">Measures and Ordinals</a>
  
  
  
  <a class="side__nav-link--within-page side__nav-link--within-page--h1" href="#Left-pad">Left pad</a>
  
  
                                </div>
                                
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1 ">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/decomposition">Region Decomposition</a>
                                
                                <ul class="side__nav-list--sub-level-2 ">
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/imandra-tools-intro">Imandra Tools Introduction</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/idf">Iterative Decomposition Framework</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/region-probabilities">Region Probabilities</a>
                                        
                                        
                                        
                                    </li>
                                    
                                </ul>
                                
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1 side__nav-list--sub-level-1--empty">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/loading-files">Multifile development</a>
                                
                                <ul class="side__nav-list--sub-level-2 ">
                                    
                                </ul>
                                
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1 side__nav-list--sub-level-1--empty">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/extracting-ocaml-modules-with-imandra-extract">Extracting OCaml modules with imandra-extract</a>
                                
                                <ul class="side__nav-list--sub-level-2 ">
                                    
                                </ul>
                                
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1 side__nav-list--sub-level-1--empty">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/plugins">Using code generation and plugins</a>
                                
                                <ul class="side__nav-list--sub-level-2 ">
                                    
                                </ul>
                                
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1 side__nav-list--sub-level-1--empty">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/reflection">Reflection of terms</a>
                                
                                <ul class="side__nav-list--sub-level-2 ">
                                    
                                </ul>
                                
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1 ">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/examples">Examples</a>
                                
                                <ul class="side__nav-list--sub-level-2 ">
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/recursion-induction-and-rewriting">Recursion, Induction and Rewriting</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/verifying-merge-sort">Verifying Merge Sort in Imandra</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/ubs-case-study">Analysing the UBS ATS Dark Pool</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/six-swiss-exchange-pricing">Region Decomposition - Exchange Pricing</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/webservice-auth-logic">Analysing Web-app Authentication Logic</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/simple-vehicle-controller">Simple Vehicle Controller</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/simple-stoplight-model">Simple Car Intersection model</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/ripple-carry-adder">Verifying a Ripple Carry Adder</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/verifying-an-ros-node">Creating and Verifying a ROS Node</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/reasonml-tic-tac-toe">Tic Tac Toe with ReasonML</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/probabilistic-reasoning-in-reasonml">Probabilistic Reasoning in ReasonML</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/sudoku">Solving Sudoku with Imandra</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/crossing-river-safely">Crossing the River Safely</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/reasonml-facetime-state-machines">Exploring The Apple FaceTime Bug with ReasonML State Machines</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/key-pair-security">Key Pair Security in Imandra</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/a-comparison-with-tla-plus">A comparison with TLA+</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/solver-synthesis">Synthesising a Game Solver in Imandra</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/supervised-learning">Analysing Machine Learning Models</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/notebooks/school-scheduler">Solving School Scheduling during COVID</a>
                                        
                                        
                                        
                                    </li>
                                    
                                </ul>
                                
                            </li>
                            
                            <li class="side__nav-list-item--sub-level-1 ">
                                
                                <a class="side__nav-link" href="/imandra-docs/notebooks/reference">Reference</a>
                                
                                <ul class="side__nav-list--sub-level-2 ">
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/odoc/imandra-base/Imandra_prelude/">Standard Library</a>
                                        
                                        
                                        
                                    </li>
                                    
                                    <li class="side__nav-list-item--sub-level-2 side__nav-list--sub-level-2--empty">
                                        
                                        <a class="side__nav-link" href="/imandra-docs/odoc/">API Docs</a>
                                        
                                        
                                        
                                    </li>
                                    
                                </ul>
                                
                            </li>
                            
                        </ul>
                        
                    </li>
                    
                    <li class="side__nav-list-item">
                        <a class="side__nav-link" href="/idf-py">Py IDF</a>
                        
                    </li>
                    
                    <li class="side__nav-list-item">
                        <a class="side__nav-link" href="/ipl">Imandra Protocol Language</a>
                        
                    </li>
                    
                    <li class="side__nav-list-item">
                        <a class="side__nav-link" href="/fix-engine">FIX Engine</a>
                        
                    </li>
                    
                </ul>
            </nav>
        </div>
    </div>

    <div class="background">
    </div>



    <div class="template-header">
        <div class="top-bar">
            <div class="side__nav-search">
                <input id="search" type="search" placeholder="Search">
                <div class="side__nav-search-icon">
                    <i class="fa fa-search"></i>
                </div>
            </div>

            <nav class="top-bar__nav-container">
                <a href="#" class="top-bar__toggle">â‰¡</a>
                <div class="top-nav-bar__group ">
                    <div class="top-nav-bar__nav nav-bar--blue top-nav-bar__nav--hidden">
                        <ul class="top-nav-bar__links top-nav-bar__links--hidden-smaller-than-tablet">
                            <li class="top-nav-bar__item">
                                <a href="https://www.imandra.ai/" class="top-nav-bar__link">Home</a>
                            </li>
                            <li class="top-nav-bar__item">
                                <a href="https://try.imandra.ai/" class="top-nav-bar__link">Try</a>
                            </li>
                            <li class="top-nav-bar__item top-nav-bar__item--group dropdown--engine">
                                <a class="top-nav-bar__link top-nav-bar__link--group">Engine</a>
                                <ul class="dropdown-content dropdown-content--engine">
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--core.svg" alt="Imandra Core" title="Imandra Core Icon">
                                        <a class="dropdown__link" href="https://www.imandra.ai/core">Imandra Core</a>
                                    </li>
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--demos.svg" alt="Demo Gallery" title="Imandra Demo Gallery Icon">
                                        <a class="dropdown__link" href="https://www.imandra.ai/demos">Demo Gallery</a>
                                    </li>
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--docs.svg" alt="Docs" title="Docs Icon">
                                        <a class="dropdown__link" href="https://docs.imandra.ai/">Docs</a>
                                    </li>
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--research.svg" alt="Research" title="Research Icon">
                                        <a class="dropdown__link dropdown__link--last" href="https://www.imandra.ai/research">Research</a>
                                    </li>
                                </ul>
                            </li>
                            <li class="top-nav-bar__item top-nav-bar__item--group dropdown--industries">
                                <a class="top-nav-bar__link top-nav-bar__link--group">Industries</a>
                                <ul class="dropdown-content dropdown-content--industries">
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--financial.svg" alt="Financial Markets" title="Financial Markets Icon">
                                        <a class="dropdown__link " href="https://www.imandra.ai/imarkets">Financial Markets</a>
                                    </li>
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--autonomy.svg" alt="Autonomous Systems" title="Autonomous Systems Icon">
                                        <a class="dropdown__link" href="https://www.imandra.ai/autonomy">Autonomous Systems</a>
                                    </li>
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--ml.svg" alt="Machine Learning" title="Machine Learning Icon">
                                        <a class="dropdown__link dropdown__link--last" href="https://www.imandra.ai/ml">Machine Learning</a>
                                    </li>
                                </ul>
                            </li>
                            <li class="top-nav-bar__item top-nav-bar__item--group dropdown--media">
                                <a class="top-nav-bar__link top-nav-bar__link--group">Media</a>
                                <ul class="dropdown-content dropdown-content--media">
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--media.svg" alt="Media" title="Media Icon">
                                        <a class="dropdown__link " href="https://www.imandra.ai/media">Media</a></li>
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--blog.svg" alt="Blog" title="Blog Icon">
                                        <a class="dropdown__link dropdown__link--last " href="https://medium.com/imandra">Blog</a>
                                    </li>
                                </ul>
                            </li>
                            <li class="top-nav-bar__item top-nav-bar__item--group dropdown--company">
                                <a class="top-nav-bar__link top-nav-bar__link--group">Company</a>
                                <ul class="dropdown-content dropdown-content--company">
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--about.svg" alt="About" title="About Icon">
                                        <a class="dropdown__link" href="https://www.imandra.ai/about">About</a></li>
                                    <li class="dropdown__item dropdown__item--with-icon">
                                        <img class="dropdown__icon" src="/imandra-docs/jekyll-resources/assets/img/icon--menu--careers.svg" alt=" Careers" title="Careers Icon">
                                        <a class="dropdown__link dropdown__link--last dropdown__link--bottom" href="https://www.imandra.ai/careers">Careers</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>

        <div class="template-header__image-container template-header__image-container--jupyter">
            <div class="template-header__image" href ="/imandra-docs">
                <img class="site-specific-image" src="/imandra-docs/static/img/site_specific_image_v_2.svg">
            </div>
        </div>

    </div>



    <script>
        document.getElementById('toggler--left').addEventListener('click', function () {
            document.querySelector('.side__right-menu-toggler .side__toggle').classList.remove(
                'side__toggle--active');
            document.querySelector('.side__left-menu-toggler .side__toggle').classList.toggle(
                'side__toggle--active');
            document.getElementsByClassName('side__nav-container')[0].classList.toggle(
                'side__nav-container--hidden');
            document.getElementsByClassName('top-nav-bar__nav')[0].classList.add('top-nav-bar__nav--hidden');
        });

        document.getElementById('toggler--right').addEventListener('click', function () {
            document.querySelector('.side__left-menu-toggler .side__toggle').classList.remove(
                'side__toggle--active');
            document.querySelector('.side__right-menu-toggler .side__toggle').classList.toggle(
                'side__toggle--active');

            document.getElementsByClassName('side__nav-container')[0].classList.add(
                'side__nav-container--hidden');
            document.getElementsByClassName('top-nav-bar__nav')[0].classList.toggle(
                'top-nav-bar__nav--hidden');
        });
    </script>
</header>
                <article class="article__container article__container--notebooks">
                    <div class="main-content main-content--jupyter">
                        
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><h1 id="Proving-Program-Termination">Proving Program Termination<a class="anchor-link" href="#Proving-Program-Termination">&#182;</a></h1><p>In this notebook, we'll walk through how Imandra can be used to analyse program termination. Along the way, we'll learn about soundness, conservative extensions, the Halting Problem, ordinals (up to $\epsilon_0$!) and well-founded orderings, path-guarded call-graphs, measure conjectures and more.</p>
<p>Before we dive into discussing (relatively deep!) aspects of mathematical logic, let's begin with a simple example. What happens when we try to define a non-terminating recursive function in Imandra?</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-2" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">f</span> <span class="n">x</span> <span class="o">=</span> <span class="n">f</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[1]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val f : &#39;a -&gt; Z.t = &lt;fun&gt;
File &#34;jupyter cell 1&#34;, line 1, characters 0-21:
<span class="ansi-red-intense-fg ansi-bold">Error</span>: Validate: no measure provided, and Imandra cannot guess any.
Are you sure this function is actually terminating?
See https://docs.imandra.ai/imandra-docs/notebooks/proving-program-termination/
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>As we can see, Imandra rejects this definition of <code>f</code> given above. Contrast this with a definition of a function like <code>map</code>:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-4" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">map</span> <span class="n">f</span> <span class="n">xs</span> <span class="o">=</span> <span class="k">match</span> <span class="n">xs</span> <span class="k">with</span>
 <span class="o">|</span> <span class="bp">[]</span> <span class="o">-&gt;</span> <span class="bp">[]</span>
 <span class="o">|</span> <span class="n">x</span> <span class="o">::</span> <span class="n">xs</span> <span class="o">-&gt;</span> <span class="n">f</span> <span class="n">x</span> <span class="o">::</span> <span class="n">map</span> <span class="n">f</span> <span class="n">xs</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[2]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val map : (&#39;a -&gt; &#39;b) -&gt; &#39;a list -&gt; &#39;b list = &lt;fun&gt;
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div class="imandra-fold panel panel-default" id="fold-d0f3b4e2-18bc-46f7-93f0-1d7241fb2dec"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>termination proof</span></div></div><div class="panel-body collapse"><div><h3>Termination proof</h3><p></p><div class="imandra-fold panel panel-default" id="fold-21f875c0-d921-4684-b0ea-a7ba5cf67b68"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>call `map f_0 (List.tl xs)` from `map f_0 xs`</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-b765c1cf-ec52-4c73-bc31-073302bfec7c"><table><tr><td><b>original</b></td><td>map f_0 xs</td></tr><tr><td><b>sub</b></td><td>map f_0 (List.tl xs)</td></tr><tr><td><b>original ordinal</b></td><td>Ordinal.Int (Ordinal.count xs)</td></tr><tr><td><b>sub ordinal</b></td><td>Ordinal.Int (Ordinal.count (List.tl xs))</td></tr><tr><td><b>path</b></td><td>[not (xs = [])]</td></tr><tr><td><b>proof</b></td><td><div class="imandra-fold panel panel-default" id="fold-6cbdad03-b232-4b7f-ba8b-ced9abe5fdda"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>detailed proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-68489502-a844-43cc-8147-c93e45676174"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-3fce2230-5d21-418d-b1e8-70ec0bf150a8"><table><tr><td><b>ground_instances</b></td><td>3</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.013s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-2888778f-0e04-4415-8997-45fc1b470cfd"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-c9930e58-03ca-4510-b763-e497261c3050"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-9e8310bb-cce0-445b-a434-a5f705426d42"><table><tr><td><b>num checks</b></td><td>7</td></tr><tr><td><b>arith assert lower</b></td><td>5</td></tr><tr><td><b>arith pivots</b></td><td>3</td></tr><tr><td><b>rlimit count</b></td><td>1967</td></tr><tr><td><b>mk clause</b></td><td>3</td></tr><tr><td><b>datatype occurs check</b></td><td>21</td></tr><tr><td><b>mk bool var</b></td><td>50</td></tr><tr><td><b>arith assert upper</b></td><td>5</td></tr><tr><td><b>datatype splits</b></td><td>3</td></tr><tr><td><b>decisions</b></td><td>7</td></tr><tr><td><b>arith add rows</b></td><td>7</td></tr><tr><td><b>propagations</b></td><td>2</td></tr><tr><td><b>conflicts</b></td><td>7</td></tr><tr><td><b>arith fixed eqs</b></td><td>4</td></tr><tr><td><b>datatype accessor ax</b></td><td>5</td></tr><tr><td><b>arith conflicts</b></td><td>1</td></tr><tr><td><b>datatype constructor ax</b></td><td>8</td></tr><tr><td><b>num allocs</b></td><td>1021904351</td></tr><tr><td><b>final checks</b></td><td>6</td></tr><tr><td><b>added eqs</b></td><td>33</td></tr><tr><td><b>del clause</b></td><td>1</td></tr><tr><td><b>arith eq adapter</b></td><td>3</td></tr><tr><td><b>memory</b></td><td>15.510000</td></tr><tr><td><b>max memory</b></td><td>17.820000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-2888778f-0e04-4415-8997-45fc1b470cfd';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-b93a2011-a638-416c-b756-d908a2369c0d"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.013s]
  not (xs = []) &amp;&amp; Ordinal.count xs &gt;= 0 &amp;&amp; Ordinal.count (List.tl xs) &gt;= 0
  ==&gt; List.tl xs = []
      || Ordinal.( &lt;&lt; ) (Ordinal.Int (Ordinal.count (List.tl xs)))
         (Ordinal.Int (Ordinal.count xs))</pre></li><li><div><h5>simplify</h5><div class="imandra-table" id="table-6cb3f0ef-9220-4bd2-94c4-c9c72ecb0ab8"><table><tr><td><b>into</b></td><td><pre>(not
 ((not (xs = []) &amp;&amp; Ordinal.count xs &gt;= 0) &amp;&amp; Ordinal.count (List.tl xs) &gt;= 0)
 || List.tl xs = [])
|| Ordinal.( &lt;&lt; ) (Ordinal.Int (Ordinal.count (List.tl xs)))
   (Ordinal.Int (Ordinal.count xs))</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-88029248-ff10-4c35-a0f8-aa8840b1fe6b"><table><tr><td><b>expr</b></td><td><pre>(|Ordinal.&lt;&lt;_102| (|Ordinal.Int_93| (|count_`ty_1 list`_1646|
                                      â€¦</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-0a7bfdaf-aff7-437f-bfb6-8d7d25f38807"><table><tr><td><b>expr</b></td><td><pre>(|count_`ty_1 list`_1646| (|get.::.1_1629| xs_1637))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-3e3655ba-acca-4156-a8f4-e788a4dfbd12"><table><tr><td><b>expr</b></td><td><pre>(|count_`ty_1 list`_1646| xs_1637)</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div><h5>unsat</h5><pre>(let ((a!1 (= (|count_`ty_1 list`_1646| xs_1637)
              (+ 1 (|count_`ty_1 list`_1646| (|get.â€¦</pre></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-b93a2011-a638-416c-b756-d908a2369c0d';
  fold.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-68489502-a844-43cc-8147-c93e45676174';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-6cbdad03-b232-4b7f-ba8b-ced9abe5fdda';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-21f875c0-d921-4684-b0ea-a7ba5cf67b68';
  fold.hydrate(target);
});
</script></div><p></p></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-d0f3b4e2-18bc-46f7-93f0-1d7241fb2dec';
  fold.hydrate(target);
});
</script></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>Imandra accepts our function <code>map</code> and proves it terminating. Under the hood, Imandra uses <a href="https://en.wikipedia.org/wiki/Ordinal_number">ordinals</a> in its termination analyses, beautiful mathematical objects representing equivalence classes of well-orderings. We'll discuss these more below!</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e6/Omega-exp-omega-labeled.svg/650px-Omega-exp-omega-labeled.svg.png" alt="ordinals" style="width: 300px;"/></p>
<p>Before we do so, let's return to that function <code>f</code> that Imandra rejected.</p>
<h2 id="Inconsistent-non-terminating-functions">Inconsistent non-terminating functions<a class="anchor-link" href="#Inconsistent-non-terminating-functions">&#182;</a></h2><p>Imagine if Imandra allowed every possible recursive function to be admitted into its logic, even those that didn't terminate. If that were the case, we could easily define the following function:</p>
<p><code>let rec f x = f x + 1</code> (note the binding strength of <code>f</code>, i.e., this is equivalent to <code>let rec f x = (f x) + 1</code>)</p>
<p>With this function admitted, we could then use its defining equation <code>f x = f x + 1</code> to derive a contradiction, e.g., by subtracting <code>f x</code> from both sides to derive <code>0 = 1</code>:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="n">x</span>       <span class="o">=</span> <span class="n">f</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">f</span> <span class="n">x</span> <span class="o">-</span> <span class="n">f</span> <span class="n">x</span> <span class="o">=</span> <span class="n">f</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">f</span> <span class="n">x</span>  
<span class="mi">0</span>         <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>This inconsistency arises because, actually, such a function <code>f</code> cannot "exist"!</p>
<p>You may be wondering: Why does consistency matter?</p>
<h2 id="Soundness,-Consistency-and-Conservative-Extensions">Soundness, Consistency and Conservative Extensions<a class="anchor-link" href="#Soundness,-Consistency-and-Conservative-Extensions">&#182;</a></h2><p>Imandra is both a programming language and a logic. A crucial property of a logic is <em>soundness</em>. For a logic to be <em>sound</em>, every theorem provable in the logic must be <em>true</em>. An <em>unsound</em> theorem prover would be of little use!</p>
<p>As we're developing programs and reasoning about them in Imandra, we're extending Imandra's logical world by defining types, functions, modules, and proving theorems. At any given time, this collection of all definitions and theorems is referred to as Imandra's <em>current theory</em>. It's important to ensure this current theory <code>T</code> is <em>consistent</em>, i.e., that there exists no statement <code>P</code> such that both <code>P</code> and <code>(not P)</code> are provable from <code>T</code>. If we weren't sure if <code>T</code> were consistent, then we would never know if a "theorem" was provable because it was true, or simply because <code>T</code> proves <code>false</code> (and <code>false</code> implies everything!).</p>
<p>Imandra's <em>definitional principle</em> is designed to ensure this consistency, by enforcing certain restrictions on our definitions. In the parlance of mathematical logic, Imandra's definitional principle ensures that every definitional extension of Imandra's current theory is a <a href="https://en.wikipedia.org/wiki/Conservative_extension">conservative extension</a>.</p>
<p>There are two main rules Imandra enforces for ensuring consistency:</p>
<ul>
<li>Every defined type must be well-founded.</li>
<li>Every defined function must be total (i.e., terminating on all possible inputs).</li>
</ul>
<p>In this notebook, we'll focus on the latter: proving program termination!</p>
<h2 id="Termination-ensures-existence">Termination ensures existence<a class="anchor-link" href="#Termination-ensures-existence">&#182;</a></h2><p>Thankfully, a deep theorem of mathematical logic tells us that admitting terminating (also known as <em>total</em>) functions cannot lead us to inconsistency.</p>
<p>To admit a new function into Imandra's logic, Imandra must be able to prove that it always terminates. For most common patterns of recursion, Imandra is able to prove termination automatically. For others, users may need to give Imandra help in the form of <em>hints</em> and <em>measures</em>.</p>
<h2 id="Let's-get-our-hands-dirty">Let's get our hands dirty<a class="anchor-link" href="#Let's-get-our-hands-dirty">&#182;</a></h2><p>Let's define a few functions and see what this is like. First, let's observe that non-recursive functions are always admissible (provided we're not dealing with <em>redefinition</em>):</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-8" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="n">k</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">=</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span> <span class="k">then</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="k">else</span> <span class="n">z</span> <span class="o">-</span> <span class="mi">1</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[3]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val k : int -&gt; int -&gt; Z.t -&gt; Z.t = &lt;fun&gt;
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>Let's now define some simple recursive functions, and observe how Imandra responds.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-10" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">sum_lst</span> <span class="o">=</span> <span class="k">function</span>
 <span class="o">|</span> <span class="bp">[]</span> <span class="o">-&gt;</span> <span class="mi">0</span>
 <span class="o">|</span> <span class="n">x</span> <span class="o">::</span> <span class="n">xs</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">sum_lst</span> <span class="n">xs</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[4]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val sum_lst : Z.t list -&gt; Z.t = &lt;fun&gt;
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div class="imandra-fold panel panel-default" id="fold-9de862c8-e907-43ab-8a22-484b922d208c"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>termination proof</span></div></div><div class="panel-body collapse"><div><h3>Termination proof</h3><p></p><div class="imandra-fold panel panel-default" id="fold-dff5e0bb-4e99-439c-a6c8-0062b88c72ed"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>call `sum_lst (List.tl _x)` from `sum_lst _x`</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-852ba33b-5854-4020-bddf-de2537447ff0"><table><tr><td><b>original</b></td><td>sum_lst _x</td></tr><tr><td><b>sub</b></td><td>sum_lst (List.tl _x)</td></tr><tr><td><b>original ordinal</b></td><td>Ordinal.Int (Ordinal.count _x)</td></tr><tr><td><b>sub ordinal</b></td><td>Ordinal.Int (Ordinal.count (List.tl _x))</td></tr><tr><td><b>path</b></td><td>[not (_x = [])]</td></tr><tr><td><b>proof</b></td><td><div class="imandra-fold panel panel-default" id="fold-774cf83b-255a-40f1-96fd-ecb762aac1ce"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>detailed proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-ceb08500-3554-4835-b346-ae645c34b77a"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-4ee6baa6-7dad-4dfa-bba3-a73e8d5f06df"><table><tr><td><b>ground_instances</b></td><td>3</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.016s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-77db5188-4c1d-46da-9341-81d572883904"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-739c0e3e-ab96-41e6-a2eb-231c80a7f4ba"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-383df279-ac75-4948-ac7c-2609c53f642d"><table><tr><td><b>num checks</b></td><td>8</td></tr><tr><td><b>arith assert lower</b></td><td>17</td></tr><tr><td><b>arith pivots</b></td><td>10</td></tr><tr><td><b>rlimit count</b></td><td>2530</td></tr><tr><td><b>mk clause</b></td><td>19</td></tr><tr><td><b>datatype occurs check</b></td><td>21</td></tr><tr><td><b>mk bool var</b></td><td>79</td></tr><tr><td><b>arith assert upper</b></td><td>12</td></tr><tr><td><b>datatype splits</b></td><td>3</td></tr><tr><td><b>decisions</b></td><td>13</td></tr><tr><td><b>arith add rows</b></td><td>16</td></tr><tr><td><b>arith bound prop</b></td><td>1</td></tr><tr><td><b>propagations</b></td><td>13</td></tr><tr><td><b>conflicts</b></td><td>9</td></tr><tr><td><b>arith fixed eqs</b></td><td>7</td></tr><tr><td><b>datatype accessor ax</b></td><td>5</td></tr><tr><td><b>arith conflicts</b></td><td>2</td></tr><tr><td><b>datatype constructor ax</b></td><td>8</td></tr><tr><td><b>num allocs</b></td><td>1080979671</td></tr><tr><td><b>final checks</b></td><td>6</td></tr><tr><td><b>added eqs</b></td><td>47</td></tr><tr><td><b>del clause</b></td><td>7</td></tr><tr><td><b>arith eq adapter</b></td><td>10</td></tr><tr><td><b>memory</b></td><td>16.180000</td></tr><tr><td><b>max memory</b></td><td>18.960000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-77db5188-4c1d-46da-9341-81d572883904';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-0033fa26-e1f1-4668-acd4-99a221aa06be"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.016s]
  not (_x = []) &amp;&amp; Ordinal.count _x &gt;= 0 &amp;&amp; Ordinal.count (List.tl _x) &gt;= 0
  ==&gt; List.tl _x = []
      || Ordinal.( &lt;&lt; ) (Ordinal.Int (Ordinal.count (List.tl _x)))
         (Ordinal.Int (Ordinal.count _x))</pre></li><li><div><h5>simplify</h5><div class="imandra-table" id="table-72a60ffb-f83d-41d4-8f97-093db5a86b52"><table><tr><td><b>into</b></td><td><pre>(not
 ((not (_x = []) &amp;&amp; Ordinal.count _x &gt;= 0) &amp;&amp; Ordinal.count (List.tl _x) &gt;= 0)
 || List.tl _x = [])
|| Ordinal.( &lt;&lt; ) (Ordinal.Int (Ordinal.count (List.tl _x)))
   (Ordinal.Int (Ordinal.count _x))</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-c48c6353-595a-48e0-9b27-5d691c2481e7"><table><tr><td><b>expr</b></td><td><pre>(|Ordinal.&lt;&lt;_102| (|Ordinal.Int_93| (|count_`int list`_1665|
                                      (â€¦</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-bfb66367-77f9-4565-bfcc-4aea7c03df2b"><table><tr><td><b>expr</b></td><td><pre>(|count_`int list`_1665| (|get.::.1_1655| _x_1656))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-f5152f34-8616-48ec-8bcd-de417e514e0c"><table><tr><td><b>expr</b></td><td><pre>(|count_`int list`_1665| _x_1656)</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div><h5>unsat</h5><pre>(let ((a!1 (&gt;= (ite (&gt;= (|get.::.0_1654| _x_1656) 0)
                    (|get.::.0_1654| _x_1656)
 â€¦</pre></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-0033fa26-e1f1-4668-acd4-99a221aa06be';
  fold.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-ceb08500-3554-4835-b346-ae645c34b77a';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-774cf83b-255a-40f1-96fd-ecb762aac1ce';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-dff5e0bb-4e99-439c-a6c8-0062b88c72ed';
  fold.hydrate(target);
});
</script></div><p></p></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-9de862c8-e907-43ab-8a22-484b922d208c';
  fold.hydrate(target);
});
</script></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-11" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">sum_lst</span> <span class="o">[</span><span class="mi">1</span><span class="o">;</span><span class="mi">2</span><span class="o">;</span><span class="mi">3</span><span class="o">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[5]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>- : Z.t = 6
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-12" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">sum</span> <span class="n">x</span> <span class="o">=</span> 
 <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="k">then</span> <span class="mi">0</span>
 <span class="k">else</span> <span class="n">x</span> <span class="o">+</span> <span class="n">sum</span><span class="o">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="o">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[6]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val sum : int -&gt; Z.t = &lt;fun&gt;
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div class="imandra-fold panel panel-default" id="fold-eab3bb47-1405-4f44-995f-a0affaefb94d"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>termination proof</span></div></div><div class="panel-body collapse"><div><h3>Termination proof</h3><p></p><div class="imandra-fold panel panel-default" id="fold-4e190768-b6a2-4a84-8fc8-47f8072736a1"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>call `sum (x - 1)` from `sum x`</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-ef54fd48-0be4-418e-b70c-216982ab3053"><table><tr><td><b>original</b></td><td>sum x</td></tr><tr><td><b>sub</b></td><td>sum (x - 1)</td></tr><tr><td><b>original ordinal</b></td><td>Ordinal.Int (if x &gt;= 0 then x else 0)</td></tr><tr><td><b>sub ordinal</b></td><td>Ordinal.Int (if (x - 1) &gt;= 0 then x - 1 else 0)</td></tr><tr><td><b>path</b></td><td>[not (x &lt;= 0)]</td></tr><tr><td><b>proof</b></td><td><div class="imandra-fold panel panel-default" id="fold-2f76a8f3-d1b5-4954-986a-f1295216768a"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>detailed proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-10c80ab7-2f68-420f-b2ec-fb549103f499"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-80d587be-a682-4546-a92f-8f91b683d2ec"><table><tr><td><b>ground_instances</b></td><td>1</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.016s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-082b0066-f3fb-413c-bc34-67128b17183f"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-00f7de46-ad80-4db1-a587-bb8305de2cca"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-14980abd-7aa5-4cab-9650-d1ac41e3f8a0"><table><tr><td><b>num checks</b></td><td>3</td></tr><tr><td><b>arith assert lower</b></td><td>8</td></tr><tr><td><b>arith pivots</b></td><td>2</td></tr><tr><td><b>rlimit count</b></td><td>1199</td></tr><tr><td><b>mk clause</b></td><td>4</td></tr><tr><td><b>datatype occurs check</b></td><td>2</td></tr><tr><td><b>mk bool var</b></td><td>20</td></tr><tr><td><b>arith assert upper</b></td><td>3</td></tr><tr><td><b>decisions</b></td><td>2</td></tr><tr><td><b>arith add rows</b></td><td>3</td></tr><tr><td><b>propagations</b></td><td>2</td></tr><tr><td><b>conflicts</b></td><td>2</td></tr><tr><td><b>arith fixed eqs</b></td><td>2</td></tr><tr><td><b>datatype accessor ax</b></td><td>2</td></tr><tr><td><b>arith conflicts</b></td><td>1</td></tr><tr><td><b>num allocs</b></td><td>1115758525</td></tr><tr><td><b>final checks</b></td><td>1</td></tr><tr><td><b>added eqs</b></td><td>6</td></tr><tr><td><b>del clause</b></td><td>4</td></tr><tr><td><b>arith eq adapter</b></td><td>2</td></tr><tr><td><b>memory</b></td><td>19.500000</td></tr><tr><td><b>max memory</b></td><td>19.500000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-082b0066-f3fb-413c-bc34-67128b17183f';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-c6bd9a60-20db-431b-8bbc-c6391bccd420"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.016s]
  not (x &lt;= 0)
  &amp;&amp; (if x &gt;= 0 then x else 0) &gt;= 0
     &amp;&amp; (if (x - 1) &gt;= 0 then x - 1 else 0) &gt;= 0
  ==&gt; (x - 1) &lt;= 0
      || Ordinal.( &lt;&lt; ) (Ordinal.Int (if (x - 1) &gt;= 0 then x - 1 else 0))
         (Ordinal.Int (if x &gt;= 0 then x else 0))</pre></li><li><div><h5>simplify</h5><div class="imandra-table" id="table-2f01f36d-8051-45da-bd01-8fdf4b60d6aa"><table><tr><td><b>into</b></td><td><pre>(not
 ((not (x &lt;= 0) &amp;&amp; (if x &gt;= 0 then x else 0) &gt;= 0)
  &amp;&amp; (if x &gt;= 1 then -1 + x else 0) &gt;= 0)
 || x &lt;= 1)
|| Ordinal.( &lt;&lt; ) (Ordinal.Int (if x &gt;= 1 then -1 + x else 0))
   (Ordinal.Int (if x &gt;= 0 then x else 0))</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-2a735a3f-72e3-4531-a7cd-86a9ba59d960"><table><tr><td><b>expr</b></td><td><pre>(|Ordinal.&lt;&lt;_102| (|Ordinal.Int_93| (ite (&gt;= x_1669 1) (+ (- 1) x_1669) 0))
                  (|Ordiâ€¦</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div><h5>unsat</h5><pre>(let ((a!1 (not (= x_1669 (ite (&gt;= x_1669 0) x_1669 0))))
      (a!2 (+ x_1669 (* (- 1) (ite (&gt;= x_1â€¦</pre></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-c6bd9a60-20db-431b-8bbc-c6391bccd420';
  fold.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-10c80ab7-2f68-420f-b2ec-fb549103f499';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-2f76a8f3-d1b5-4954-986a-f1295216768a';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-4e190768-b6a2-4a84-8fc8-47f8072736a1';
  fold.hydrate(target);
});
</script></div><p></p></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-eab3bb47-1405-4f44-995f-a0affaefb94d';
  fold.hydrate(target);
});
</script></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-13" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">sum</span> <span class="mi">5</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[7]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>- : Z.t = 15
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-14" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">sum</span> <span class="mi">100</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[8]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>- : Z.t = 5050
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>Out of curiosity, let's see what would happen if we made a mistake in our definition of <code>sum</code> above, by, e.g., using <code>x = 0</code> as our test instead of <code>x &lt;= 0</code>:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-16" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">sum_oops</span> <span class="n">x</span> <span class="o">=</span> 
 <span class="k">if</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="mi">0</span>
 <span class="k">else</span> <span class="n">x</span> <span class="o">+</span> <span class="n">sum_oops</span> <span class="o">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="o">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[9]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val sum_oops : Z.t -&gt; Z.t = &lt;fun&gt;
File &#34;jupyter cell 9&#34;, line 1, characters 0-63:
<span class="ansi-red-intense-fg ansi-bold">Error</span>: rejected definition for function sum_oops,
Imandra could not prove termination. 
hint: problematic sub-call from `sum_oops x` to `sum_oops (x - 1)`
 under path not (x = 0) is not decreasing (measured subset: (x))
See https://docs.imandra.ai/imandra-docs/notebooks/proving-program-termination/
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>Note how Imandra rejects the definition, and tells us this is because it could not prove termination, in particular regarding the problematic recursive call <code>sum_oops (x-1)</code>. Indeed, <code>sum_oops</code> does not terminate when <code>x</code> is negative!</p>
<h1 id="Structural-Recursions">Structural Recursions<a class="anchor-link" href="#Structural-Recursions">&#182;</a></h1><p>Structural recursions are easy for Imandra. For example, let's define a datatype of trees and a few functions on them. Imandra will fly on these termination proofs.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-18" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">type</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">tree</span> <span class="o">=</span> <span class="nc">Leaf</span> <span class="k">of</span> <span class="k">&#39;</span><span class="n">a</span> <span class="o">|</span> <span class="nc">Node</span> <span class="k">of</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">tree</span> <span class="o">*</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">tree</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[10]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>type &#39;a tree = Leaf of &#39;a | Node of &#39;a tree * &#39;a tree
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-19" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">size</span> <span class="o">=</span> <span class="k">function</span>
 <span class="o">|</span> <span class="nc">Leaf</span> <span class="o">_</span>     <span class="o">-&gt;</span> <span class="mi">1</span>
 <span class="o">|</span> <span class="nc">Node</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span><span class="n">b</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">size</span> <span class="n">a</span> <span class="o">+</span> <span class="n">size</span> <span class="n">b</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[11]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val size : &#39;a tree -&gt; Z.t = &lt;fun&gt;
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div class="imandra-fold panel panel-default" id="fold-86510dd8-7c30-4e80-9a98-4f43ac24d284"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>termination proof</span></div></div><div class="panel-body collapse"><div><h3>Termination proof</h3><p></p><div class="imandra-fold panel panel-default" id="fold-cb9120aa-275f-4465-a146-f8498f5fb40c"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>call `size (Destruct(Node, 0, _x))` from `size _x`</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-4822ee56-a5d2-4901-b6fd-77954b06742f"><table><tr><td><b>original</b></td><td>size _x</td></tr><tr><td><b>sub</b></td><td>size (Destruct(Node, 0, _x))</td></tr><tr><td><b>original ordinal</b></td><td>Ordinal.Int (Ordinal.count _x)</td></tr><tr><td><b>sub ordinal</b></td><td>Ordinal.Int (Ordinal.count (Destruct(Node, 0, _x)))</td></tr><tr><td><b>path</b></td><td>[not Is_a(Leaf, _x)]</td></tr><tr><td><b>proof</b></td><td><div class="imandra-fold panel panel-default" id="fold-ef655cbc-31ec-4d68-8157-ceaa0c4464d9"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>detailed proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-27eb9a0a-751e-499d-b840-a977569ebb08"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-624dbf28-fab0-4619-8bc7-3e02fccc64bc"><table><tr><td><b>ground_instances</b></td><td>3</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.014s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-79d3935f-3140-427d-a328-208c365134a9"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-1e7b01de-797b-4fb8-9430-84ebb77b5b59"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-cf6e52e4-cfc0-438f-86d0-2e6355e34c5c"><table><tr><td><b>num checks</b></td><td>8</td></tr><tr><td><b>arith assert lower</b></td><td>11</td></tr><tr><td><b>arith pivots</b></td><td>9</td></tr><tr><td><b>rlimit count</b></td><td>4844</td></tr><tr><td><b>mk clause</b></td><td>16</td></tr><tr><td><b>datatype occurs check</b></td><td>12</td></tr><tr><td><b>mk bool var</b></td><td>73</td></tr><tr><td><b>arith assert upper</b></td><td>8</td></tr><tr><td><b>datatype splits</b></td><td>3</td></tr><tr><td><b>decisions</b></td><td>14</td></tr><tr><td><b>arith add rows</b></td><td>7</td></tr><tr><td><b>propagations</b></td><td>11</td></tr><tr><td><b>conflicts</b></td><td>6</td></tr><tr><td><b>arith fixed eqs</b></td><td>3</td></tr><tr><td><b>datatype accessor ax</b></td><td>13</td></tr><tr><td><b>arith conflicts</b></td><td>2</td></tr><tr><td><b>datatype constructor ax</b></td><td>11</td></tr><tr><td><b>num allocs</b></td><td>1245666311</td></tr><tr><td><b>final checks</b></td><td>4</td></tr><tr><td><b>added eqs</b></td><td>47</td></tr><tr><td><b>del clause</b></td><td>9</td></tr><tr><td><b>arith eq adapter</b></td><td>6</td></tr><tr><td><b>memory</b></td><td>26.120000</td></tr><tr><td><b>max memory</b></td><td>26.120000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-79d3935f-3140-427d-a328-208c365134a9';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-ac73e699-a5a9-44dc-963e-c2005676fbee"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.014s]
  not Is_a(Leaf, _x)
  &amp;&amp; Ordinal.count _x &gt;= 0 &amp;&amp; Ordinal.count (Destruct(Node, 0, _x)) &gt;= 0
  ==&gt; Is_a(Leaf, Destruct(Node, 0, _x)) &amp;&amp; Is_a(Leaf, Destruct(Node, 0, _x))
      || Ordinal.( &lt;&lt; ) (Ordinal.Int (Ordinal.count (Destruct(Node, 0, _x))))
         (Ordinal.Int (Ordinal.count _x))</pre></li><li><div><h5>simplify</h5><div class="imandra-table" id="table-3388de69-5cf4-4733-b703-0355f1e13732"><table><tr><td><b>into</b></td><td><pre>(not
 ((not Is_a(Leaf, _x) &amp;&amp; Ordinal.count _x &gt;= 0)
  &amp;&amp; Ordinal.count (Destruct(Node, 0, _x)) &gt;= 0)
 || Is_a(Leaf, Destruct(Node, 0, _x)))
|| Ordinal.( &lt;&lt; ) (Ordinal.Int (Ordinal.count (Destruct(Node, 0, _x))))
   (Ordinal.Int (Ordinal.count _x))</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-404754ba-9413-4569-9a7f-58c9782e13fd"><table><tr><td><b>expr</b></td><td><pre>(|Ordinal.&lt;&lt;_102| (|Ordinal.Int_93| (|count_`ty_0 tree`_1719|
                                      â€¦</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-7bb4b0d3-be87-40bd-acb2-5374b0bd6d27"><table><tr><td><b>expr</b></td><td><pre>(|count_`ty_0 tree`_1719| (|get.Node.0_1702| _x_1708))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-d6ad66ed-f731-426b-8912-cb16dda8ab3c"><table><tr><td><b>expr</b></td><td><pre>(|count_`ty_0 tree`_1719| _x_1708)</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div><h5>unsat</h5><pre>(let ((a!1 (ite (&gt;= (|count_`ty_0 tree`_1719| (|get.Node.1_1703| _x_1708)) 0)
                (|counâ€¦</pre></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-ac73e699-a5a9-44dc-963e-c2005676fbee';
  fold.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-27eb9a0a-751e-499d-b840-a977569ebb08';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-ef655cbc-31ec-4d68-8157-ceaa0c4464d9';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-cb9120aa-275f-4465-a146-f8498f5fb40c';
  fold.hydrate(target);
});
</script></div><p></p><div class="imandra-fold panel panel-default" id="fold-72c24079-b91e-47d5-bb84-14b53954909a"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>call `size (Destruct(Node, 1, _x))` from `size _x`</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-c01ec1f7-8dd5-4c6d-93bc-96b60db3d1d2"><table><tr><td><b>original</b></td><td>size _x</td></tr><tr><td><b>sub</b></td><td>size (Destruct(Node, 1, _x))</td></tr><tr><td><b>original ordinal</b></td><td>Ordinal.Int (Ordinal.count _x)</td></tr><tr><td><b>sub ordinal</b></td><td>Ordinal.Int (Ordinal.count (Destruct(Node, 1, _x)))</td></tr><tr><td><b>path</b></td><td>[not Is_a(Leaf, _x)]</td></tr><tr><td><b>proof</b></td><td><div class="imandra-fold panel panel-default" id="fold-0ba1062d-1715-4246-9b65-42c9d43b27d5"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>detailed proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-d2078c4e-4ac8-4c72-ba03-f73ae229e988"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-ec90a9aa-7ee2-4f7e-a0a8-d560ee59ba7d"><table><tr><td><b>ground_instances</b></td><td>3</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.016s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-27788544-2e2c-4185-95ef-0bb66acfbb09"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-5cb065aa-9044-4be1-afb3-e0ba961f6f45"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-d5741bf9-a717-4309-8dbf-70730e988299"><table><tr><td><b>num checks</b></td><td>8</td></tr><tr><td><b>arith assert lower</b></td><td>11</td></tr><tr><td><b>arith pivots</b></td><td>9</td></tr><tr><td><b>rlimit count</b></td><td>2422</td></tr><tr><td><b>mk clause</b></td><td>16</td></tr><tr><td><b>datatype occurs check</b></td><td>12</td></tr><tr><td><b>mk bool var</b></td><td>73</td></tr><tr><td><b>arith assert upper</b></td><td>8</td></tr><tr><td><b>datatype splits</b></td><td>3</td></tr><tr><td><b>decisions</b></td><td>14</td></tr><tr><td><b>arith add rows</b></td><td>7</td></tr><tr><td><b>propagations</b></td><td>11</td></tr><tr><td><b>conflicts</b></td><td>6</td></tr><tr><td><b>arith fixed eqs</b></td><td>3</td></tr><tr><td><b>datatype accessor ax</b></td><td>13</td></tr><tr><td><b>arith conflicts</b></td><td>2</td></tr><tr><td><b>datatype constructor ax</b></td><td>11</td></tr><tr><td><b>num allocs</b></td><td>1211049672</td></tr><tr><td><b>final checks</b></td><td>4</td></tr><tr><td><b>added eqs</b></td><td>47</td></tr><tr><td><b>del clause</b></td><td>9</td></tr><tr><td><b>arith eq adapter</b></td><td>6</td></tr><tr><td><b>memory</b></td><td>23.140000</td></tr><tr><td><b>max memory</b></td><td>23.140000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-27788544-2e2c-4185-95ef-0bb66acfbb09';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-d376c022-5754-48dd-9138-779ffd42bf36"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.016s]
  not Is_a(Leaf, _x)
  &amp;&amp; Ordinal.count _x &gt;= 0 &amp;&amp; Ordinal.count (Destruct(Node, 1, _x)) &gt;= 0
  ==&gt; Is_a(Leaf, Destruct(Node, 1, _x)) &amp;&amp; Is_a(Leaf, Destruct(Node, 1, _x))
      || Ordinal.( &lt;&lt; ) (Ordinal.Int (Ordinal.count (Destruct(Node, 1, _x))))
         (Ordinal.Int (Ordinal.count _x))</pre></li><li><div><h5>simplify</h5><div class="imandra-table" id="table-0b4f69de-5f8e-4bd8-bec9-68bd150041fc"><table><tr><td><b>into</b></td><td><pre>(not
 ((not Is_a(Leaf, _x) &amp;&amp; Ordinal.count _x &gt;= 0)
  &amp;&amp; Ordinal.count (Destruct(Node, 1, _x)) &gt;= 0)
 || Is_a(Leaf, Destruct(Node, 1, _x)))
|| Ordinal.( &lt;&lt; ) (Ordinal.Int (Ordinal.count (Destruct(Node, 1, _x))))
   (Ordinal.Int (Ordinal.count _x))</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-ef82ee13-70b7-48b3-ba40-f796ccb465a7"><table><tr><td><b>expr</b></td><td><pre>(|Ordinal.&lt;&lt;_102| (|Ordinal.Int_93| (|count_`ty_0 tree`_1719|
                                      â€¦</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-dff4d2db-e939-497a-8be8-c073150f1617"><table><tr><td><b>expr</b></td><td><pre>(|count_`ty_0 tree`_1719| (|get.Node.1_1703| _x_1708))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-ddbb289e-5538-4ec4-b18d-bc6cffe634c6"><table><tr><td><b>expr</b></td><td><pre>(|count_`ty_0 tree`_1719| _x_1708)</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div><h5>unsat</h5><pre>(let ((a!1 (ite (&gt;= (|count_`ty_0 tree`_1719| (|get.Node.0_1702| _x_1708)) 0)
                (|counâ€¦</pre></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-d376c022-5754-48dd-9138-779ffd42bf36';
  fold.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-d2078c4e-4ac8-4c72-ba03-f73ae229e988';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-0ba1062d-1715-4246-9b65-42c9d43b27d5';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-72c24079-b91e-47d5-bb84-14b53954909a';
  fold.hydrate(target);
});
</script></div><p></p></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-86510dd8-7c30-4e80-9a98-4f43ac24d284';
  fold.hydrate(target);
});
</script></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>For fun, let's ask Imandra to synthesize an <code>int tree</code> of <code>size</code> 5 for us:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-21" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">instance</span> <span class="o">(</span><span class="k">fun</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="kt">int</span> <span class="n">tree</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">size</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">5</span><span class="o">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[12]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>- : int tree -&gt; bool = &lt;fun&gt;
module CX : sig val x : int tree end
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><pre>Instance (after 9 steps, 0.020s):
 let (x : int tree) =
   (Node
      ((Node ((Leaf (9)), (Leaf (8)))),
       (Node ((Leaf (7)), (Node ((Leaf (10)), (Leaf (11))))))))
</pre></div>

</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div style="font-size: 1.2em; padding: 0.5em; border-top: 1px solid green; border-bottom: 1px solid green"><i class="fa fa-check-circle" style="margin-right: 0.5em; color: green"></i><span>Instance</span></div><div><div class="imandra-alternatives" id="alt-099c3877-9ffc-45e1-a0ce-f34d262e2532"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>call graph</a></li><li class="" data-toggle="tab"><a>proof</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-graphviz" id="graphviz-cd55b9fa-1e15-4515-a1be-8cf41b4fffdb"><textarea style="display: none">digraph &quot;call graph&quot; {
goal [label=&quot;size x = 5&quot;,shape=box,style=filled,color=&quot;cyan&quot;,fontname=&quot;courier&quot;,fontsize=14];
goal -&gt; call_10 [label=&quot;calls&quot;];
call_10 [label=&quot;size x&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_10 -&gt; call_57 [label=&quot;calls&quot;];
call_10 -&gt; call_55 [label=&quot;calls&quot;];
call_57 [label=&quot;size (Destruct(Node, 1, x))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_57 -&gt; call_152 [label=&quot;calls&quot;];
call_57 -&gt; call_150 [label=&quot;calls&quot;];
call_55 [label=&quot;size (Destruct(Node, 0, x))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_55 -&gt; call_232 [label=&quot;calls&quot;];
call_55 -&gt; call_230 [label=&quot;calls&quot;];
call_152 [label=&quot;size (Destruct(Node, 1, Destruct(Node, 1, x)))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_152 -&gt; call_393 [label=&quot;calls&quot;];
call_152 -&gt; call_391 [label=&quot;calls&quot;];
call_150 [label=&quot;size (Destruct(Node, 0, Destruct(Node, 1, x)))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_150 -&gt; call_532 [label=&quot;calls&quot;];
call_150 -&gt; call_530 [label=&quot;calls&quot;];
call_232 [label=&quot;size (Destruct(Node, 1, Destruct(Node, 0, x)))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_232 -&gt; call_670 [label=&quot;calls&quot;];
call_232 -&gt; call_668 [label=&quot;calls&quot;];
call_230 [label=&quot;size (Destruct(Node, 0, Destruct(Node, 0, x)))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_230 -&gt; call_751 [label=&quot;calls&quot;];
call_230 -&gt; call_666 [label=&quot;calls&quot;];
call_393 [label=&quot;size (Destruct(Node, 1, Destruct(Node, 1, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_393 -&gt; call_975 [label=&quot;calls&quot;];
call_393 -&gt; call_973 [label=&quot;calls&quot;];
call_391 [label=&quot;size (Destruct(Node, 0, Destruct(Node, 1, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_391 -&gt; call_1054 [label=&quot;calls&quot;];
call_391 -&gt; call_1052 [label=&quot;calls&quot;];
call_532 [label=&quot;size (Destruct(Node, 1, Destruct(Node, 0, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_530 [label=&quot;size (Destruct(Node, 0, Destruct(Node, 0, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_670 [label=&quot;size (Destruct(Node, 1, Destruct(Node, 1, Destruct(Node, 0, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_668 [label=&quot;size (Destruct(Node, 0, Destruct(Node, 1, Destruct(Node, 0, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_751 [label=&quot;size (Destruct(Node, 1, Destruct(Node, 0, Destruct(Node, 0, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_666 [label=&quot;size (Destruct(Node, 0, Destruct(Node, 0, Destruct(Node, 0, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_975 [label=&quot;size (Destruct(Node, 1, Destruct(Node, 1, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_973 [label=&quot;size (Destruct(Node, 0, Destruct(Node, 1, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_1054 [label=&quot;size (Destruct(Node, 1, Destruct(Node, 0, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_1052 [label=&quot;size (Destruct(Node, 0, Destruct(Node, 0, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-cd55b9fa-1e15-4515-a1be-8cf41b4fffdb';
  graphviz.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-proof-top"><div class="imandra-fold panel panel-default" id="fold-3e140bed-5aed-455e-8513-c79944374d66"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>proof attempt</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-bc153c22-aa7d-4702-8635-b29c20ba236c"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li><li class="" data-toggle="tab"><a>graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-dcc75f6e-5511-4b08-88ce-e94f8c768af1"><table><tr><td><b>ground_instances</b></td><td>9</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.020s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-0122184c-adec-4b72-b213-d44b9d015045"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-f49b62f3-ca21-4774-b01b-77d290f2d5d3"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-a262e664-f2d4-4201-823e-022ce0371f05"><table><tr><td><b>arith offset eqs</b></td><td>2</td></tr><tr><td><b>num checks</b></td><td>19</td></tr><tr><td><b>arith assert lower</b></td><td>134</td></tr><tr><td><b>arith pivots</b></td><td>73</td></tr><tr><td><b>rlimit count</b></td><td>11283</td></tr><tr><td><b>mk clause</b></td><td>168</td></tr><tr><td><b>datatype occurs check</b></td><td>17</td></tr><tr><td><b>mk bool var</b></td><td>725</td></tr><tr><td><b>arith assert upper</b></td><td>83</td></tr><tr><td><b>datatype splits</b></td><td>36</td></tr><tr><td><b>decisions</b></td><td>132</td></tr><tr><td><b>arith add rows</b></td><td>204</td></tr><tr><td><b>arith bound prop</b></td><td>7</td></tr><tr><td><b>propagations</b></td><td>401</td></tr><tr><td><b>interface eqs</b></td><td>4</td></tr><tr><td><b>conflicts</b></td><td>23</td></tr><tr><td><b>arith fixed eqs</b></td><td>26</td></tr><tr><td><b>datatype accessor ax</b></td><td>135</td></tr><tr><td><b>arith conflicts</b></td><td>6</td></tr><tr><td><b>arith assert diseq</b></td><td>52</td></tr><tr><td><b>datatype constructor ax</b></td><td>135</td></tr><tr><td><b>num allocs</b></td><td>1368746159</td></tr><tr><td><b>final checks</b></td><td>22</td></tr><tr><td><b>added eqs</b></td><td>724</td></tr><tr><td><b>del clause</b></td><td>101</td></tr><tr><td><b>arith eq adapter</b></td><td>95</td></tr><tr><td><b>memory</b></td><td>21.040000</td></tr><tr><td><b>max memory</b></td><td>26.390000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-0122184c-adec-4b72-b213-d44b9d015045';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-0d7bfe8f-80bf-4c23-ab4e-3d370d1c1682"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.020s] size :var_0: = 5</pre></li><li><div>unroll<div class="imandra-table" id="table-cc333bd4-9922-48c2-aff8-076092a77f9f"><table><tr><td><b>expr</b></td><td><pre>(size_1729 x_45)</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-5c0eff92-5c23-4157-9aab-faa98fea5c1a"><table><tr><td><b>expr</b></td><td><pre>(size_1729 (|get.Node.1_1728| x_45))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-5782b8c0-c1c6-4aa0-b175-14103f3c16f9"><table><tr><td><b>expr</b></td><td><pre>(size_1729 (|get.Node.0_1727| x_45))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-ffdca493-1ab2-439e-8222-6077ed0db49a"><table><tr><td><b>expr</b></td><td><pre>(size_1729 (|get.Node.1_1728| (|get.Node.1_1728| x_45)))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-9929becc-e674-4b73-bc13-9e06ea383a68"><table><tr><td><b>expr</b></td><td><pre>(size_1729 (|get.Node.0_1727| (|get.Node.1_1728| x_45)))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-b705da0c-d6eb-41eb-9293-86b992748f73"><table><tr><td><b>expr</b></td><td><pre>(size_1729 (|get.Node.1_1728| (|get.Node.0_1727| x_45)))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-1aa45615-e127-423f-9aad-f6129609b7d7"><table><tr><td><b>expr</b></td><td><pre>(size_1729 (|get.Node.0_1727| (|get.Node.0_1727| x_45)))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-330278d9-00d4-4392-939a-25848b32aa94"><table><tr><td><b>expr</b></td><td><pre>(size_1729 (|get.Node.1_1728| (|get.Node.1_1728| (|get.Node.1_1728| x_45))))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-4db6054f-4dda-4f2c-bbdd-3d6a0607d112"><table><tr><td><b>expr</b></td><td><pre>(size_1729 (|get.Node.0_1727| (|get.Node.1_1728| (|get.Node.1_1728| x_45))))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li>Sat (Some  let (x : int tree) =
   (Node
      ((Node ((Leaf (9)), (Leaf (8)))),
       (Node ((Leaf (7)), (Node ((Leaf (10)), (Leaf (11))))))))
)</li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-0d7bfe8f-80bf-4c23-ab4e-3d370d1c1682';
  fold.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-f5c09962-32b6-4b9f-ace8-9bf0aed6f8de"><textarea style="display: none">digraph &quot;proof&quot; {
p_287 [label=&quot;Start (size :var_0: = 5 :time 0.020s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_287 -&gt; p_286 [label=&quot;&quot;];
p_286 [label=&quot;Unroll ([size x], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_286 -&gt; p_285 [label=&quot;&quot;];
p_285 [label=&quot;Unroll ([size (Destruct(Node, 1, x))], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_285 -&gt; p_284 [label=&quot;&quot;];
p_284 [label=&quot;Unroll ([size (Destruct(Node, 0, x))], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_284 -&gt; p_283 [label=&quot;&quot;];
p_283 [label=&quot;Unroll ([size (Destruct(Node, 1, Destruct(Node, 1, x)))], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_283 -&gt; p_282 [label=&quot;&quot;];
p_282 [label=&quot;Unroll ([size (Destruct(Node, 0, Destruct(Node, 1, x)))], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_282 -&gt; p_281 [label=&quot;&quot;];
p_281 [label=&quot;Unroll ([size (Destruct(Node, 1, Destruct(Node, 0, x)))], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_281 -&gt; p_280 [label=&quot;&quot;];
p_280 [label=&quot;Unroll ([size (Destruct(Node, 0, Destruct(Node, 0, x)))], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_280 -&gt; p_279 [label=&quot;&quot;];
p_279 [label=&quot;Unroll ([size (Destruct(Node, 1, Destruct(Node, 1, Destruct(Node, 1, â€¦))))],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_279 -&gt; p_278 [label=&quot;&quot;];
p_278 [label=&quot;Unroll ([size (Destruct(Node, 0, Destruct(Node, 1, Destruct(Node, 1, â€¦))))],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_278 -&gt; p_277 [label=&quot;&quot;];
p_277 [label=&quot;Sat (Some  let (x : int tree) =\l   (Node\l      ((Node ((Leaf (9)), (Leaf (8)))),\l       (Node ((Leaf (7)), (Node ((Leaf (10)), (Leaf (11))))))))\l)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-f5c09962-32b6-4b9f-ace8-9bf0aed6f8de';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-bc153c22-aa7d-4702-8635-b29c20ba236c';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-3e140bed-5aed-455e-8513-c79944374d66';
  fold.hydrate(target);
});
</script></div></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-099c3877-9ffc-45e1-a0ce-f34d262e2532';
  alternatives.hydrate(target);
});
</script></div></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-22" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">size</span> <span class="nn">CX</span><span class="p">.</span><span class="n">x</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[13]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>- : Z.t = 5
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>Cool! Let's now define a function to sum the leaves of an <code>int tree</code>:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-24" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">sum_tree</span> <span class="o">=</span> <span class="k">function</span>
 <span class="o">|</span> <span class="nc">Leaf</span> <span class="n">n</span>     <span class="o">-&gt;</span> <span class="n">n</span>
 <span class="o">|</span> <span class="nc">Node</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span><span class="n">b</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">sum_tree</span> <span class="n">a</span> <span class="o">+</span> <span class="n">sum_tree</span> <span class="n">b</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[14]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val sum_tree : Z.t tree -&gt; Z.t = &lt;fun&gt;
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div class="imandra-fold panel panel-default" id="fold-12580e46-f8bc-4636-90f9-c9f874017b9c"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>termination proof</span></div></div><div class="panel-body collapse"><div><h3>Termination proof</h3><p></p><div class="imandra-fold panel panel-default" id="fold-5843ad8b-376a-4d31-ad17-e1a96bc82b1e"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>call `sum_tree (Destruct(Node, 0, _x))` from `sum_tree _x`</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-148a4630-cfdc-431f-acd1-dec17ce6f36b"><table><tr><td><b>original</b></td><td>sum_tree _x</td></tr><tr><td><b>sub</b></td><td>sum_tree (Destruct(Node, 0, _x))</td></tr><tr><td><b>original ordinal</b></td><td>Ordinal.Int (Ordinal.count _x)</td></tr><tr><td><b>sub ordinal</b></td><td>Ordinal.Int (Ordinal.count (Destruct(Node, 0, _x)))</td></tr><tr><td><b>path</b></td><td>[not Is_a(Leaf, _x)]</td></tr><tr><td><b>proof</b></td><td><div class="imandra-fold panel panel-default" id="fold-a828a239-ed14-4ec3-b0e9-c2fb8b28f035"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>detailed proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-949e768b-b3c6-4680-bf16-962105027c94"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-ee7b5c59-ffb4-416a-8299-394d76b97061"><table><tr><td><b>ground_instances</b></td><td>3</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.016s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-328edf7f-a2a8-4c7f-8224-816ea4e786fa"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-592eab9d-98b7-4327-8dac-e79d21d8435b"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-074f1a70-306d-44af-a1d0-a6a41f196862"><table><tr><td><b>num checks</b></td><td>8</td></tr><tr><td><b>arith assert lower</b></td><td>11</td></tr><tr><td><b>arith pivots</b></td><td>9</td></tr><tr><td><b>rlimit count</b></td><td>5032</td></tr><tr><td><b>mk clause</b></td><td>16</td></tr><tr><td><b>datatype occurs check</b></td><td>12</td></tr><tr><td><b>mk bool var</b></td><td>73</td></tr><tr><td><b>arith assert upper</b></td><td>8</td></tr><tr><td><b>datatype splits</b></td><td>3</td></tr><tr><td><b>decisions</b></td><td>14</td></tr><tr><td><b>arith add rows</b></td><td>7</td></tr><tr><td><b>propagations</b></td><td>11</td></tr><tr><td><b>conflicts</b></td><td>6</td></tr><tr><td><b>arith fixed eqs</b></td><td>3</td></tr><tr><td><b>datatype accessor ax</b></td><td>13</td></tr><tr><td><b>arith conflicts</b></td><td>2</td></tr><tr><td><b>datatype constructor ax</b></td><td>11</td></tr><tr><td><b>num allocs</b></td><td>1501849439</td></tr><tr><td><b>final checks</b></td><td>4</td></tr><tr><td><b>added eqs</b></td><td>47</td></tr><tr><td><b>del clause</b></td><td>9</td></tr><tr><td><b>arith eq adapter</b></td><td>6</td></tr><tr><td><b>memory</b></td><td>21.310000</td></tr><tr><td><b>max memory</b></td><td>26.390000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-328edf7f-a2a8-4c7f-8224-816ea4e786fa';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-0ae2c744-e71b-4cd3-8df0-bd0c36f22215"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.016s]
  not Is_a(Leaf, _x)
  &amp;&amp; Ordinal.count _x &gt;= 0 &amp;&amp; Ordinal.count (Destruct(Node, 0, _x)) &gt;= 0
  ==&gt; Is_a(Leaf, Destruct(Node, 0, _x)) &amp;&amp; Is_a(Leaf, Destruct(Node, 0, _x))
      || Ordinal.( &lt;&lt; ) (Ordinal.Int (Ordinal.count (Destruct(Node, 0, _x))))
         (Ordinal.Int (Ordinal.count _x))</pre></li><li><div><h5>simplify</h5><div class="imandra-table" id="table-ead4b40a-0f1f-41de-a3c9-d51250d1faca"><table><tr><td><b>into</b></td><td><pre>(not
 ((not Is_a(Leaf, _x) &amp;&amp; Ordinal.count _x &gt;= 0)
  &amp;&amp; Ordinal.count (Destruct(Node, 0, _x)) &gt;= 0)
 || Is_a(Leaf, Destruct(Node, 0, _x)))
|| Ordinal.( &lt;&lt; ) (Ordinal.Int (Ordinal.count (Destruct(Node, 0, _x))))
   (Ordinal.Int (Ordinal.count _x))</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-2ce9f148-1293-4945-8b5d-c4d188b36a9e"><table><tr><td><b>expr</b></td><td><pre>(|Ordinal.&lt;&lt;_102| (|Ordinal.Int_93| (|count_`int tree`_1768|
                                      (â€¦</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-9210ade5-5f62-4cfa-ac39-f0535a7bf634"><table><tr><td><b>expr</b></td><td><pre>(|count_`int tree`_1768| (|get.Node.0_1755| _x_1757))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-71ba82ae-2668-4edb-8491-811a21e905be"><table><tr><td><b>expr</b></td><td><pre>(|count_`int tree`_1768| _x_1757)</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div><h5>unsat</h5><pre>(let ((a!1 (ite (&gt;= (|count_`int tree`_1768| (|get.Node.1_1756| _x_1757)) 0)
                (|countâ€¦</pre></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-0ae2c744-e71b-4cd3-8df0-bd0c36f22215';
  fold.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-949e768b-b3c6-4680-bf16-962105027c94';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-a828a239-ed14-4ec3-b0e9-c2fb8b28f035';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-5843ad8b-376a-4d31-ad17-e1a96bc82b1e';
  fold.hydrate(target);
});
</script></div><p></p><div class="imandra-fold panel panel-default" id="fold-60a3d04b-775d-4488-8333-a0526ebda84a"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>call `sum_tree (Destruct(Node, 1, _x))` from `sum_tree _x`</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-c861eaaa-6e28-40be-8898-9d6e51ff81a7"><table><tr><td><b>original</b></td><td>sum_tree _x</td></tr><tr><td><b>sub</b></td><td>sum_tree (Destruct(Node, 1, _x))</td></tr><tr><td><b>original ordinal</b></td><td>Ordinal.Int (Ordinal.count _x)</td></tr><tr><td><b>sub ordinal</b></td><td>Ordinal.Int (Ordinal.count (Destruct(Node, 1, _x)))</td></tr><tr><td><b>path</b></td><td>[not Is_a(Leaf, _x)]</td></tr><tr><td><b>proof</b></td><td><div class="imandra-fold panel panel-default" id="fold-071a8f9e-195f-4c07-9be3-39f37cdd36eb"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>detailed proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-c9bdc39e-e0ff-4ca7-accc-055d0770ca6b"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-5d69a21e-9965-48ff-a798-b22921b0af47"><table><tr><td><b>ground_instances</b></td><td>3</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.013s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-c4ccbf16-a964-4c06-aa0c-4a7e5bc895b5"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-0da061ee-8592-4260-a4a4-84924c88501a"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-f0b01fc2-b937-4319-b0c0-a129083b9182"><table><tr><td><b>num checks</b></td><td>8</td></tr><tr><td><b>arith assert lower</b></td><td>11</td></tr><tr><td><b>arith pivots</b></td><td>9</td></tr><tr><td><b>rlimit count</b></td><td>2516</td></tr><tr><td><b>mk clause</b></td><td>16</td></tr><tr><td><b>datatype occurs check</b></td><td>12</td></tr><tr><td><b>mk bool var</b></td><td>73</td></tr><tr><td><b>arith assert upper</b></td><td>8</td></tr><tr><td><b>datatype splits</b></td><td>3</td></tr><tr><td><b>decisions</b></td><td>14</td></tr><tr><td><b>arith add rows</b></td><td>7</td></tr><tr><td><b>propagations</b></td><td>11</td></tr><tr><td><b>conflicts</b></td><td>6</td></tr><tr><td><b>arith fixed eqs</b></td><td>3</td></tr><tr><td><b>datatype accessor ax</b></td><td>13</td></tr><tr><td><b>arith conflicts</b></td><td>2</td></tr><tr><td><b>datatype constructor ax</b></td><td>11</td></tr><tr><td><b>num allocs</b></td><td>1434802261</td></tr><tr><td><b>final checks</b></td><td>4</td></tr><tr><td><b>added eqs</b></td><td>47</td></tr><tr><td><b>del clause</b></td><td>9</td></tr><tr><td><b>arith eq adapter</b></td><td>6</td></tr><tr><td><b>memory</b></td><td>21.110000</td></tr><tr><td><b>max memory</b></td><td>26.390000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-c4ccbf16-a964-4c06-aa0c-4a7e5bc895b5';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-2a55c9b4-b563-4d8b-a0d4-2150bc53c30c"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.013s]
  not Is_a(Leaf, _x)
  &amp;&amp; Ordinal.count _x &gt;= 0 &amp;&amp; Ordinal.count (Destruct(Node, 1, _x)) &gt;= 0
  ==&gt; Is_a(Leaf, Destruct(Node, 1, _x)) &amp;&amp; Is_a(Leaf, Destruct(Node, 1, _x))
      || Ordinal.( &lt;&lt; ) (Ordinal.Int (Ordinal.count (Destruct(Node, 1, _x))))
         (Ordinal.Int (Ordinal.count _x))</pre></li><li><div><h5>simplify</h5><div class="imandra-table" id="table-465b55f2-79f1-488a-a953-4f4c3db5e7b1"><table><tr><td><b>into</b></td><td><pre>(not
 ((not Is_a(Leaf, _x) &amp;&amp; Ordinal.count _x &gt;= 0)
  &amp;&amp; Ordinal.count (Destruct(Node, 1, _x)) &gt;= 0)
 || Is_a(Leaf, Destruct(Node, 1, _x)))
|| Ordinal.( &lt;&lt; ) (Ordinal.Int (Ordinal.count (Destruct(Node, 1, _x))))
   (Ordinal.Int (Ordinal.count _x))</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-afa5aa7d-f327-4def-903a-e60e2d338619"><table><tr><td><b>expr</b></td><td><pre>(|Ordinal.&lt;&lt;_102| (|Ordinal.Int_93| (|count_`int tree`_1768|
                                      (â€¦</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-3454bb70-64e6-4461-a2d0-cd57c5a39d9c"><table><tr><td><b>expr</b></td><td><pre>(|count_`int tree`_1768| (|get.Node.1_1756| _x_1757))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-980cd43e-6f3e-44f7-bf56-713a216b78b8"><table><tr><td><b>expr</b></td><td><pre>(|count_`int tree`_1768| _x_1757)</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div><h5>unsat</h5><pre>(let ((a!1 (ite (&gt;= (|count_`int tree`_1768| (|get.Node.0_1755| _x_1757)) 0)
                (|countâ€¦</pre></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-2a55c9b4-b563-4d8b-a0d4-2150bc53c30c';
  fold.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-c9bdc39e-e0ff-4ca7-accc-055d0770ca6b';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-071a8f9e-195f-4c07-9be3-39f37cdd36eb';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-60a3d04b-775d-4488-8333-a0526ebda84a';
  fold.hydrate(target);
});
</script></div><p></p></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-12580e46-f8bc-4636-90f9-c9f874017b9c';
  fold.hydrate(target);
});
</script></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>Out of curiosity, are there any trees whose <code>size</code> is greater than <code>5</code> and equal to <code>3</code> times their <code>sum</code>?</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-26" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">instance</span> <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">size</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">5</span> <span class="o">&amp;&amp;</span> <span class="n">size</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">sum_tree</span> <span class="n">x</span><span class="o">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[15]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>- : Z.t tree -&gt; bool = &lt;fun&gt;
module CX : sig val x : int tree end
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><pre>Instance (after 26 steps, 0.055s):
 let (x : int tree) =
   (Node
      ((Node ((Leaf ((-4812))), (Leaf (6652)))),
       (Node
          ((Node ((Leaf ((-11210))), (Leaf ((-2997))))),
           (Node ((Leaf (6202)), (Leaf (6167))))))))
</pre></div>

</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div style="font-size: 1.2em; padding: 0.5em; border-top: 1px solid green; border-bottom: 1px solid green"><i class="fa fa-check-circle" style="margin-right: 0.5em; color: green"></i><span>Instance</span></div><div><div class="imandra-alternatives" id="alt-2f2b5943-0d2f-482d-a16f-336c93426a7c"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>call graph</a></li><li class="" data-toggle="tab"><a>proof</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-graphviz" id="graphviz-404d2609-cdb9-4c3d-883f-a00eb36e93c8"><textarea style="display: none">digraph &quot;call graph&quot; {
goal [label=&quot;size x \&gt;= 5 &amp;&amp; size x = 3 * sum_tree x&quot;,shape=box,style=filled,color=&quot;cyan&quot;,fontname=&quot;courier&quot;,fontsize=14];
goal -&gt; call_17 [label=&quot;calls&quot;];
goal -&gt; call_15 [label=&quot;calls&quot;];
call_17 [label=&quot;sum_tree x&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_17 -&gt; call_94 [label=&quot;calls&quot;];
call_17 -&gt; call_96 [label=&quot;calls&quot;];
call_15 [label=&quot;size x&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_15 -&gt; call_180 [label=&quot;calls&quot;];
call_15 -&gt; call_181 [label=&quot;calls&quot;];
call_94 [label=&quot;sum_tree (Destruct(Node, 0, x))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_94 -&gt; call_327 [label=&quot;calls&quot;];
call_94 -&gt; call_329 [label=&quot;calls&quot;];
call_96 [label=&quot;sum_tree (Destruct(Node, 1, x))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_96 -&gt; call_249 [label=&quot;calls&quot;];
call_96 -&gt; call_251 [label=&quot;calls&quot;];
call_180 [label=&quot;size (Destruct(Node, 0, x))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_180 -&gt; call_477 [label=&quot;calls&quot;];
call_180 -&gt; call_478 [label=&quot;calls&quot;];
call_181 [label=&quot;size (Destruct(Node, 1, x))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_181 -&gt; call_402 [label=&quot;calls&quot;];
call_181 -&gt; call_403 [label=&quot;calls&quot;];
call_327 [label=&quot;sum_tree (Destruct(Node, 0, Destruct(Node, 0, x)))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_327 -&gt; call_882 [label=&quot;calls&quot;];
call_327 -&gt; call_880 [label=&quot;calls&quot;];
call_329 [label=&quot;sum_tree (Destruct(Node, 1, Destruct(Node, 0, x)))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_329 -&gt; call_796 [label=&quot;calls&quot;];
call_329 -&gt; call_798 [label=&quot;calls&quot;];
call_249 [label=&quot;sum_tree (Destruct(Node, 0, Destruct(Node, 1, x)))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_249 -&gt; call_702 [label=&quot;calls&quot;];
call_249 -&gt; call_700 [label=&quot;calls&quot;];
call_251 [label=&quot;sum_tree (Destruct(Node, 1, Destruct(Node, 1, x)))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_251 -&gt; call_616 [label=&quot;calls&quot;];
call_251 -&gt; call_614 [label=&quot;calls&quot;];
call_477 [label=&quot;size (Destruct(Node, 0, Destruct(Node, 0, x)))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_477 -&gt; call_1290 [label=&quot;calls&quot;];
call_477 -&gt; call_1291 [label=&quot;calls&quot;];
call_478 [label=&quot;size (Destruct(Node, 1, Destruct(Node, 0, x)))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_478 -&gt; call_1022 [label=&quot;calls&quot;];
call_478 -&gt; call_1023 [label=&quot;calls&quot;];
call_402 [label=&quot;size (Destruct(Node, 0, Destruct(Node, 1, x)))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_402 -&gt; call_1051 [label=&quot;calls&quot;];
call_402 -&gt; call_1050 [label=&quot;calls&quot;];
call_403 [label=&quot;size (Destruct(Node, 1, Destruct(Node, 1, x)))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_403 -&gt; call_973 [label=&quot;calls&quot;];
call_403 -&gt; call_974 [label=&quot;calls&quot;];
call_882 [label=&quot;sum_tree (Destruct(Node, 1, Destruct(Node, 0, Destruct(Node, 0, â€¦))))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_882 -&gt; call_2210 [label=&quot;calls&quot;];
call_882 -&gt; call_2212 [label=&quot;calls&quot;];
call_880 [label=&quot;sum_tree (Destruct(Node, 0, Destruct(Node, 0, Destruct(Node, 0, â€¦))))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_880 -&gt; call_2313 [label=&quot;calls&quot;];
call_880 -&gt; call_2315 [label=&quot;calls&quot;];
call_796 [label=&quot;sum_tree (Destruct(Node, 0, Destruct(Node, 1, Destruct(Node, 0, â€¦))))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_796 -&gt; call_2103 [label=&quot;calls&quot;];
call_796 -&gt; call_2105 [label=&quot;calls&quot;];
call_798 [label=&quot;sum_tree (Destruct(Node, 1, Destruct(Node, 1, Destruct(Node, 0, â€¦))))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_798 -&gt; call_2006 [label=&quot;calls&quot;];
call_798 -&gt; call_2008 [label=&quot;calls&quot;];
call_702 [label=&quot;sum_tree (Destruct(Node, 1, Destruct(Node, 0, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_702 -&gt; call_1755 [label=&quot;calls&quot;];
call_702 -&gt; call_1753 [label=&quot;calls&quot;];
call_700 [label=&quot;sum_tree (Destruct(Node, 0, Destruct(Node, 0, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_700 -&gt; call_1897 [label=&quot;calls&quot;];
call_700 -&gt; call_1895 [label=&quot;calls&quot;];
call_616 [label=&quot;sum_tree (Destruct(Node, 1, Destruct(Node, 1, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_616 -&gt; call_1472 [label=&quot;calls&quot;];
call_616 -&gt; call_1470 [label=&quot;calls&quot;];
call_614 [label=&quot;sum_tree (Destruct(Node, 0, Destruct(Node, 1, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_614 -&gt; call_1634 [label=&quot;calls&quot;];
call_614 -&gt; call_1636 [label=&quot;calls&quot;];
call_1290 [label=&quot;size (Destruct(Node, 0, Destruct(Node, 0, Destruct(Node, 0, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_1291 [label=&quot;size (Destruct(Node, 1, Destruct(Node, 0, Destruct(Node, 0, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_1022 [label=&quot;size (Destruct(Node, 0, Destruct(Node, 1, Destruct(Node, 0, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_1023 [label=&quot;size (Destruct(Node, 1, Destruct(Node, 1, Destruct(Node, 0, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_1051 [label=&quot;size (Destruct(Node, 1, Destruct(Node, 0, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_1051 -&gt; call_2696 [label=&quot;calls&quot;];
call_1051 -&gt; call_2697 [label=&quot;calls&quot;];
call_1050 [label=&quot;size (Destruct(Node, 0, Destruct(Node, 0, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_1050 -&gt; call_1887 [label=&quot;calls&quot;];
call_1050 -&gt; call_2311 [label=&quot;calls&quot;];
call_973 [label=&quot;size (Destruct(Node, 0, Destruct(Node, 1, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_973 -&gt; call_607 [label=&quot;calls&quot;];
call_973 -&gt; call_1886 [label=&quot;calls&quot;];
call_974 [label=&quot;size (Destruct(Node, 1, Destruct(Node, 1, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;green&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_974 -&gt; call_2414 [label=&quot;calls&quot;];
call_974 -&gt; call_2413 [label=&quot;calls&quot;];
call_2210 [label=&quot;sum_tree (Destruct(Node, 0, Destruct(Node, 1, Destruct(Node, 0, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_2212 [label=&quot;sum_tree (Destruct(Node, 1, Destruct(Node, 1, Destruct(Node, 0, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_2313 [label=&quot;sum_tree (Destruct(Node, 0, Destruct(Node, 0, Destruct(Node, 0, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_2315 [label=&quot;sum_tree (Destruct(Node, 1, Destruct(Node, 0, Destruct(Node, 0, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_2103 [label=&quot;sum_tree (Destruct(Node, 0, Destruct(Node, 0, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_2105 [label=&quot;sum_tree (Destruct(Node, 1, Destruct(Node, 0, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_2006 [label=&quot;sum_tree (Destruct(Node, 0, Destruct(Node, 1, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_2008 [label=&quot;sum_tree (Destruct(Node, 1, Destruct(Node, 1, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_1755 [label=&quot;sum_tree (Destruct(Node, 1, Destruct(Node, 1, Destruct(Node, 0, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_1753 [label=&quot;sum_tree (Destruct(Node, 0, Destruct(Node, 1, Destruct(Node, 0, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_1897 [label=&quot;sum_tree (Destruct(Node, 1, Destruct(Node, 0, Destruct(Node, 0, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_1895 [label=&quot;sum_tree (Destruct(Node, 0, Destruct(Node, 0, Destruct(Node, 0, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_1472 [label=&quot;sum_tree (Destruct(Node, 1, Destruct(Node, 1, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_1470 [label=&quot;sum_tree (Destruct(Node, 0, Destruct(Node, 1, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_1634 [label=&quot;sum_tree (Destruct(Node, 0, Destruct(Node, 0, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_1636 [label=&quot;sum_tree (Destruct(Node, 1, Destruct(Node, 0, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_2696 [label=&quot;size (Destruct(Node, 0, Destruct(Node, 1, Destruct(Node, 0, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_2697 [label=&quot;size (Destruct(Node, 1, Destruct(Node, 1, Destruct(Node, 0, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_1887 [label=&quot;size (Destruct(Node, 0, Destruct(Node, 0, Destruct(Node, 0, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_2311 [label=&quot;size (Destruct(Node, 1, Destruct(Node, 0, Destruct(Node, 0, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_607 [label=&quot;size (Destruct(Node, 1, Destruct(Node, 0, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_1886 [label=&quot;size (Destruct(Node, 0, Destruct(Node, 0, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_2414 [label=&quot;size (Destruct(Node, 1, Destruct(Node, 1, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
call_2413 [label=&quot;size (Destruct(Node, 0, Destruct(Node, 1, Destruct(Node, 1, â€¦))))&quot;,shape=box,style=filled,color=&quot;yellow&quot;,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-404d2609-cdb9-4c3d-883f-a00eb36e93c8';
  graphviz.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-proof-top"><div class="imandra-fold panel panel-default" id="fold-1047b540-c7a6-48f2-a62f-b0be786db1df"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>proof attempt</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-57652a6f-ba18-4437-97db-2a1e3c180cfd"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li><li class="" data-toggle="tab"><a>graph</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-c1edd36a-cb67-44ca-b961-1745718fcbc8"><table><tr><td><b>ground_instances</b></td><td>26</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.055s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-2bbc94cf-2802-4003-9831-bf162ad659d5"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-bfcab06d-7c51-4c25-830c-c5a706217430"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-829d5a66-e6ca-4253-af72-3f870f61efe3"><table><tr><td><b>arith offset eqs</b></td><td>14</td></tr><tr><td><b>num checks</b></td><td>53</td></tr><tr><td><b>arith assert lower</b></td><td>512</td></tr><tr><td><b>arith patches_succ</b></td><td>3</td></tr><tr><td><b>arith pivots</b></td><td>446</td></tr><tr><td><b>rlimit count</b></td><td>59772</td></tr><tr><td><b>mk clause</b></td><td>594</td></tr><tr><td><b>datatype occurs check</b></td><td>94</td></tr><tr><td><b>mk bool var</b></td><td>2763</td></tr><tr><td><b>arith gcd tests</b></td><td>20</td></tr><tr><td><b>arith assert upper</b></td><td>365</td></tr><tr><td><b>datatype splits</b></td><td>100</td></tr><tr><td><b>decisions</b></td><td>981</td></tr><tr><td><b>arith add rows</b></td><td>1413</td></tr><tr><td><b>arith bound prop</b></td><td>8</td></tr><tr><td><b>propagations</b></td><td>1905</td></tr><tr><td><b>arith patches</b></td><td>4</td></tr><tr><td><b>interface eqs</b></td><td>9</td></tr><tr><td><b>conflicts</b></td><td>57</td></tr><tr><td><b>arith fixed eqs</b></td><td>266</td></tr><tr><td><b>datatype accessor ax</b></td><td>517</td></tr><tr><td><b>minimized lits</b></td><td>6</td></tr><tr><td><b>arith conflicts</b></td><td>9</td></tr><tr><td><b>arith assert diseq</b></td><td>147</td></tr><tr><td><b>datatype constructor ax</b></td><td>517</td></tr><tr><td><b>num allocs</b></td><td>1550928935</td></tr><tr><td><b>final checks</b></td><td>57</td></tr><tr><td><b>added eqs</b></td><td>3313</td></tr><tr><td><b>del clause</b></td><td>421</td></tr><tr><td><b>arith ineq splits</b></td><td>1</td></tr><tr><td><b>arith eq adapter</b></td><td>437</td></tr><tr><td><b>memory</b></td><td>25.380000</td></tr><tr><td><b>max memory</b></td><td>26.390000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-2bbc94cf-2802-4003-9831-bf162ad659d5';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-2a6660c3-ac08-4b79-9a80-834d82c1a562"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.055s] size :var_0: &gt;= 5 &amp;&amp; size :var_0: = 3 * sum_tree :var_0:</pre></li><li><div>unroll<div class="imandra-table" id="table-41823d27-2103-4936-82d0-11d44c067558"><table><tr><td><b>expr</b></td><td><pre>(sum_tree_47 x_52)</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-95e514ce-61ce-40fe-8b30-f315a9e0fd92"><table><tr><td><b>expr</b></td><td><pre>(size_1778 x_52)</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-0ee3def8-1082-429d-9f9b-ec36fb98a823"><table><tr><td><b>expr</b></td><td><pre>(sum_tree_47 (|get.Node.1_1777| x_52))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-02ab279b-a68c-4fb9-b53e-c933e217170a"><table><tr><td><b>expr</b></td><td><pre>(sum_tree_47 (|get.Node.0_1776| x_52))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-c77dfbd8-ba8d-4ea3-9d0a-08d11486d639"><table><tr><td><b>expr</b></td><td><pre>(size_1778 (|get.Node.1_1777| x_52))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-da0f0276-2d07-43a4-91dc-b831f9f0f961"><table><tr><td><b>expr</b></td><td><pre>(size_1778 (|get.Node.0_1776| x_52))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-ca1ec410-ab3f-4136-b152-c24afae72e22"><table><tr><td><b>expr</b></td><td><pre>(sum_tree_47 (|get.Node.1_1777| (|get.Node.1_1777| x_52)))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-fef55efc-cbdf-4212-90d4-0d7f4054fd8c"><table><tr><td><b>expr</b></td><td><pre>(sum_tree_47 (|get.Node.0_1776| (|get.Node.1_1777| x_52)))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-b05d4d89-5f30-401c-961d-4745a20d962b"><table><tr><td><b>expr</b></td><td><pre>(sum_tree_47 (|get.Node.1_1777| (|get.Node.0_1776| x_52)))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-79117762-768f-4071-8808-a405b05801ab"><table><tr><td><b>expr</b></td><td><pre>(sum_tree_47 (|get.Node.0_1776| (|get.Node.0_1776| x_52)))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-4e70219d-2a04-4c4c-b93b-11028dc98077"><table><tr><td><b>expr</b></td><td><pre>(size_1778 (|get.Node.1_1777| (|get.Node.1_1777| x_52)))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-27bc4605-3105-43ad-95fd-187b29bfaf51"><table><tr><td><b>expr</b></td><td><pre>(size_1778 (|get.Node.0_1776| (|get.Node.1_1777| x_52)))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-8e4720a8-8092-430b-addc-3244fba2468d"><table><tr><td><b>expr</b></td><td><pre>(size_1778 (|get.Node.1_1777| (|get.Node.0_1776| x_52)))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-35059bef-06e1-408e-a267-cc51cfa62664"><table><tr><td><b>expr</b></td><td><pre>(size_1778 (|get.Node.0_1776| (|get.Node.0_1776| x_52)))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-1138824c-04da-4b2c-b59e-f955ff5e5aac"><table><tr><td><b>expr</b></td><td><pre>(sum_tree_47 (|get.Node.1_1777| (|get.Node.1_1777| (|get.Node.1_1777| x_52))))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-65a96950-cc04-400f-9d81-97451d2adfe9"><table><tr><td><b>expr</b></td><td><pre>(sum_tree_47 (|get.Node.0_1776| (|get.Node.1_1777| (|get.Node.1_1777| x_52))))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-e0ba66cd-9d28-4249-8d07-bd6e3402ebee"><table><tr><td><b>expr</b></td><td><pre>(sum_tree_47 (|get.Node.1_1777| (|get.Node.0_1776| (|get.Node.1_1777| x_52))))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-53967927-6786-4b33-9483-c7f6f700a34b"><table><tr><td><b>expr</b></td><td><pre>(sum_tree_47 (|get.Node.0_1776| (|get.Node.0_1776| (|get.Node.1_1777| x_52))))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-9847548b-1300-43c2-a354-a07e1c874288"><table><tr><td><b>expr</b></td><td><pre>(sum_tree_47 (|get.Node.1_1777| (|get.Node.1_1777| (|get.Node.0_1776| x_52))))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-04ebd1be-64cb-4106-9724-28e809dad9fa"><table><tr><td><b>expr</b></td><td><pre>(sum_tree_47 (|get.Node.0_1776| (|get.Node.1_1777| (|get.Node.0_1776| x_52))))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-9f756e73-ae11-43c1-b40c-7e2d4e5263aa"><table><tr><td><b>expr</b></td><td><pre>(sum_tree_47 (|get.Node.1_1777| (|get.Node.0_1776| (|get.Node.0_1776| x_52))))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-ab1cf0e8-d36d-49a0-9907-16120e61d594"><table><tr><td><b>expr</b></td><td><pre>(sum_tree_47 (|get.Node.0_1776| (|get.Node.0_1776| (|get.Node.0_1776| x_52))))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-19a6a8f4-eb6b-4c74-a79b-41b9307c1e86"><table><tr><td><b>expr</b></td><td><pre>(size_1778 (|get.Node.1_1777| (|get.Node.1_1777| (|get.Node.1_1777| x_52))))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-8936f5f4-160c-4744-8843-b9837e6a3985"><table><tr><td><b>expr</b></td><td><pre>(size_1778 (|get.Node.0_1776| (|get.Node.1_1777| (|get.Node.1_1777| x_52))))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-c8501687-4e35-4e2a-857b-cc022447b880"><table><tr><td><b>expr</b></td><td><pre>(size_1778 (|get.Node.1_1777| (|get.Node.0_1776| (|get.Node.1_1777| x_52))))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-4ac07f5d-efab-42f4-9702-c546238743b6"><table><tr><td><b>expr</b></td><td><pre>(size_1778 (|get.Node.0_1776| (|get.Node.0_1776| (|get.Node.1_1777| x_52))))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li>Sat (Some  let (x : int tree) =
   (Node
      ((Node ((Leaf ((-4812))), (Leaf (6652)))),
       (Node
          ((Node ((Leaf ((-11210))), (Leaf ((-2997))))),
           (Node ((Leaf (6202)), (Leaf (6167))))))))
)</li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-2a6660c3-ac08-4b79-9a80-834d82c1a562';
  fold.hydrate(target);
});
</script></div></div><div class="tab-pane"><div class="imandra-graphviz" id="graphviz-3ca47edf-4173-4a74-902f-a9102aa8fb37"><textarea style="display: none">digraph &quot;proof&quot; {
p_327 [label=&quot;Start (size :var_0: \&gt;= 5 &amp;&amp; size :var_0: = 3 * sum_tree :var_0: :time 0.055s)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_327 -&gt; p_326 [label=&quot;&quot;];
p_326 [label=&quot;Unroll ([sum_tree x], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_326 -&gt; p_325 [label=&quot;&quot;];
p_325 [label=&quot;Unroll ([size x], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_325 -&gt; p_324 [label=&quot;&quot;];
p_324 [label=&quot;Unroll ([sum_tree (Destruct(Node, 1, x))], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_324 -&gt; p_323 [label=&quot;&quot;];
p_323 [label=&quot;Unroll ([sum_tree (Destruct(Node, 0, x))], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_323 -&gt; p_322 [label=&quot;&quot;];
p_322 [label=&quot;Unroll ([size (Destruct(Node, 1, x))], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_322 -&gt; p_321 [label=&quot;&quot;];
p_321 [label=&quot;Unroll ([size (Destruct(Node, 0, x))], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_321 -&gt; p_320 [label=&quot;&quot;];
p_320 [label=&quot;Unroll ([sum_tree (Destruct(Node, 1, Destruct(Node, 1, x)))], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_320 -&gt; p_319 [label=&quot;&quot;];
p_319 [label=&quot;Unroll ([sum_tree (Destruct(Node, 0, Destruct(Node, 1, x)))], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_319 -&gt; p_318 [label=&quot;&quot;];
p_318 [label=&quot;Unroll ([sum_tree (Destruct(Node, 1, Destruct(Node, 0, x)))], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_318 -&gt; p_317 [label=&quot;&quot;];
p_317 [label=&quot;Unroll ([sum_tree (Destruct(Node, 0, Destruct(Node, 0, x)))], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_317 -&gt; p_316 [label=&quot;&quot;];
p_316 [label=&quot;Unroll ([size (Destruct(Node, 1, Destruct(Node, 1, x)))], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_316 -&gt; p_315 [label=&quot;&quot;];
p_315 [label=&quot;Unroll ([size (Destruct(Node, 0, Destruct(Node, 1, x)))], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_315 -&gt; p_314 [label=&quot;&quot;];
p_314 [label=&quot;Unroll ([size (Destruct(Node, 1, Destruct(Node, 0, x)))], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_314 -&gt; p_313 [label=&quot;&quot;];
p_313 [label=&quot;Unroll ([size (Destruct(Node, 0, Destruct(Node, 0, x)))], [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_313 -&gt; p_312 [label=&quot;&quot;];
p_312 [label=&quot;Unroll ([sum_tree\l         (Destruct(Node, 1, Destruct(Node, 1, Destruct(Node, 1, â€¦))))],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_312 -&gt; p_311 [label=&quot;&quot;];
p_311 [label=&quot;Unroll ([sum_tree\l         (Destruct(Node, 0, Destruct(Node, 1, Destruct(Node, 1, â€¦))))],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_311 -&gt; p_310 [label=&quot;&quot;];
p_310 [label=&quot;Unroll ([sum_tree\l         (Destruct(Node, 1, Destruct(Node, 0, Destruct(Node, 1, â€¦))))],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_310 -&gt; p_309 [label=&quot;&quot;];
p_309 [label=&quot;Unroll ([sum_tree\l         (Destruct(Node, 0, Destruct(Node, 0, Destruct(Node, 1, â€¦))))],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_309 -&gt; p_308 [label=&quot;&quot;];
p_308 [label=&quot;Unroll ([sum_tree\l         (Destruct(Node, 1, Destruct(Node, 1, Destruct(Node, 0, â€¦))))],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_308 -&gt; p_307 [label=&quot;&quot;];
p_307 [label=&quot;Unroll ([sum_tree\l         (Destruct(Node, 0, Destruct(Node, 1, Destruct(Node, 0, â€¦))))],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_307 -&gt; p_306 [label=&quot;&quot;];
p_306 [label=&quot;Unroll ([sum_tree\l         (Destruct(Node, 1, Destruct(Node, 0, Destruct(Node, 0, â€¦))))],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_306 -&gt; p_305 [label=&quot;&quot;];
p_305 [label=&quot;Unroll ([sum_tree\l         (Destruct(Node, 0, Destruct(Node, 0, Destruct(Node, 0, â€¦))))],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_305 -&gt; p_304 [label=&quot;&quot;];
p_304 [label=&quot;Unroll ([size (Destruct(Node, 1, Destruct(Node, 1, Destruct(Node, 1, â€¦))))],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_304 -&gt; p_303 [label=&quot;&quot;];
p_303 [label=&quot;Unroll ([size (Destruct(Node, 0, Destruct(Node, 1, Destruct(Node, 1, â€¦))))],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_303 -&gt; p_302 [label=&quot;&quot;];
p_302 [label=&quot;Unroll ([size (Destruct(Node, 1, Destruct(Node, 0, Destruct(Node, 1, â€¦))))],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_302 -&gt; p_301 [label=&quot;&quot;];
p_301 [label=&quot;Unroll ([size (Destruct(Node, 0, Destruct(Node, 0, Destruct(Node, 1, â€¦))))],\l        [[]])&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
p_301 -&gt; p_300 [label=&quot;&quot;];
p_300 [label=&quot;Sat (Some  let (x : int tree) =\l   (Node\l      ((Node ((Leaf ((-4812))), (Leaf (6652)))),\l       (Node\l          ((Node ((Leaf ((-11210))), (Leaf ((-2997))))),\l           (Node ((Leaf (6202)), (Leaf (6167))))))))\l)&quot;,shape=box,style=filled,fontname=&quot;courier&quot;,fontsize=14];
}
</textarea><button class="btn btn-primary">Load graph</button><div class="imandra-graphviz-loading display-none">Loading..</div><div class="imandra-graphviz-target"></div><script>
require(['nbextensions/nbimandra/graphviz'], function (graphviz) {
  var target = '#graphviz-3ca47edf-4173-4a74-902f-a9102aa8fb37';
  graphviz.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-57652a6f-ba18-4437-97db-2a1e3c180cfd';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-1047b540-c7a6-48f2-a62f-b0be786db1df';
  fold.hydrate(target);
});
</script></div></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-2f2b5943-0d2f-482d-a16f-336c93426a7c';
  alternatives.hydrate(target);
});
</script></div></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>Yes! Let's compute with that counterexample to see:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-28" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">size</span> <span class="nn">CX</span><span class="p">.</span><span class="n">x</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[16]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>- : Z.t = 6
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-29" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="mi">3</span> <span class="o">*</span> <span class="n">sum_tree</span> <span class="nn">CX</span><span class="p">.</span><span class="n">x</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[17]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>- : Z.t = 6
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><h1 id="Ackermann-and-Admission-Hints">Ackermann and Admission Hints<a class="anchor-link" href="#Ackermann-and-Admission-Hints">&#182;</a></h1><p><img src="http://staff.ustc.edu.cn/~csli/graduate/algorithms/book6/451_a.gif"></p>
<p>The Ackermann function (actually, family of functions) is famous for many reasons. It grows extremely quickly, so quickly that it can be proved to not be <a href="https://en.wikipedia.org/wiki/Primitive_recursive_function">primitive recursive</a>!</p>
<p>Here's an example definition:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<pre><code>let rec ack m n =
  if m &lt;= 0 then n + 1
  else if n &lt;= 0 then ack (m-1) 1
  else ack (m-1) (ack m (n-1))</code></pre>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>It's worth it to study this function for a bit, to get a feel for why its recursion is tricky.</p>
<p>If we ask Imandra to admit it, we find out that it's tricky for Imandra, too!</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-33" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">ack</span> <span class="n">m</span> <span class="n">n</span> <span class="o">=</span>
  <span class="k">if</span> <span class="n">m</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="k">then</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span>
  <span class="k">else</span> <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="k">then</span> <span class="n">ack</span> <span class="o">(</span><span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="mi">1</span>
  <span class="k">else</span> <span class="n">ack</span> <span class="o">(</span><span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">ack</span> <span class="n">m</span> <span class="o">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="o">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[18]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val ack : int -&gt; int -&gt; int = &lt;fun&gt;
File &#34;jupyter cell 18&#34;, line 1, characters 0-105:
<span class="ansi-red-intense-fg ansi-bold">Error</span>: rejected definition for function ack, Imandra could not prove termination. 
hint: problematic sub-call from `ack m n` to `ack m (n - 1)`  under path
not (n &lt;= 0) and not (m &lt;= 0) is not decreasing (measured subset: (m))
See https://docs.imandra.ai/imandra-docs/notebooks/proving-program-termination/
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>Imandra tells us that it's unable to prove termination in the particular path that goes from <code>ack m n</code> to <code>ack m (n-1)</code>. Imandra further tells us that it tried to prove termination in this case using a <em>measured subset</em> of the arguments of <code>ack</code> containing only <code>m</code>.</p>
<p>Why does <code>ack</code> terminate, and how can we explain this to Imandra?</p>
<p>If we think about it for a little bit, we realise that <code>ack</code> terminates because its <em>pair</em> of arguments decreases <em>lexicographically</em> in its recursive calls. From the perspective of ordinals, the arguments of the recursive calls decrease along the ordinal $\omega^2$.</p>
<h2 id="Lexicographic-termination-(up-to-$\omega^\omega$)">Lexicographic termination (up to $\omega^\omega$)<a class="anchor-link" href="#Lexicographic-termination-(up-to-$\omega^\omega$)">&#182;</a></h2><p>Lexicographic termination is so common, there's a special way we can tell Imandra to use it.</p>
<p>This is done with the <code>@@adm</code> ("admission") attribute.</p>
<p>We can tell Imandra to prove <code>ack</code> terminating by using a lexicographic order on <code>(m,n)</code> in the following way:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-35" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">ack</span> <span class="n">m</span> <span class="n">n</span> <span class="o">=</span>
  <span class="k">if</span> <span class="n">m</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="k">then</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span>
  <span class="k">else</span> <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="k">then</span> <span class="n">ack</span> <span class="o">(</span><span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="mi">1</span>
  <span class="k">else</span> <span class="n">ack</span> <span class="o">(</span><span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">ack</span> <span class="n">m</span> <span class="o">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="o">))</span>
  <span class="o">[@@</span><span class="n">adm</span> <span class="n">m</span><span class="o">,</span><span class="n">n</span><span class="o">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[19]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val ack : int -&gt; int -&gt; int = &lt;fun&gt;
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div class="imandra-fold panel panel-default" id="fold-7ad70ced-eb8b-46d0-afd9-5735ec9ce8a2"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>termination proof</span></div></div><div class="panel-body collapse"><div><h3>Termination proof</h3><p></p><div class="imandra-fold panel panel-default" id="fold-b78a8417-d89b-44cc-a33a-bb988d4a21ec"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>call `ack (m - 1) 1` from `ack m n`</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-13d18f7b-3947-4dcb-94ae-de64296d54e6"><table><tr><td><b>original</b></td><td>ack m n</td></tr><tr><td><b>sub</b></td><td>ack (m - 1) 1</td></tr><tr><td><b>original ordinal</b></td><td>Ordinal.of_list
[Ordinal.Int (if m &gt;= 0 then m else 0); Ordinal.Int (if n &gt;= 0 then n else 0)]</td></tr><tr><td><b>sub ordinal</b></td><td>Ordinal.of_list
[Ordinal.Int (if (m - 1) &gt;= 0 then m - 1 else 0);
 Ordinal.Int (if 1 &gt;= 0 then 1 else 0)]</td></tr><tr><td><b>path</b></td><td>[n &lt;= 0 &amp;&amp; not (m &lt;= 0)]</td></tr><tr><td><b>proof</b></td><td><div class="imandra-fold panel panel-default" id="fold-426793ad-f166-4b6c-8344-50b544543988"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>detailed proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-cda7a18d-0a71-49ff-a905-95677513d42d"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-333d0965-83e9-4115-be2f-6e6d175dec7c"><table><tr><td><b>ground_instances</b></td><td>5</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.018s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-54949fd3-acf1-4f31-a490-f5a7aff83567"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-3e84f026-fb80-4877-a58e-2823f33c4bce"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-b4f9b1c1-1ab0-48c3-9e7e-a5faed9ce94e"><table><tr><td><b>arith offset eqs</b></td><td>12</td></tr><tr><td><b>num checks</b></td><td>12</td></tr><tr><td><b>arith assert lower</b></td><td>17</td></tr><tr><td><b>arith pivots</b></td><td>9</td></tr><tr><td><b>rlimit count</b></td><td>28346</td></tr><tr><td><b>mk clause</b></td><td>74</td></tr><tr><td><b>datatype occurs check</b></td><td>77</td></tr><tr><td><b>mk bool var</b></td><td>214</td></tr><tr><td><b>arith assert upper</b></td><td>44</td></tr><tr><td><b>datatype splits</b></td><td>8</td></tr><tr><td><b>decisions</b></td><td>114</td></tr><tr><td><b>arith add rows</b></td><td>15</td></tr><tr><td><b>propagations</b></td><td>115</td></tr><tr><td><b>conflicts</b></td><td>21</td></tr><tr><td><b>arith fixed eqs</b></td><td>8</td></tr><tr><td><b>datatype accessor ax</b></td><td>31</td></tr><tr><td><b>arith conflicts</b></td><td>3</td></tr><tr><td><b>arith assert diseq</b></td><td>4</td></tr><tr><td><b>datatype constructor ax</b></td><td>18</td></tr><tr><td><b>num allocs</b></td><td>1802645681</td></tr><tr><td><b>final checks</b></td><td>8</td></tr><tr><td><b>added eqs</b></td><td>226</td></tr><tr><td><b>del clause</b></td><td>19</td></tr><tr><td><b>arith eq adapter</b></td><td>31</td></tr><tr><td><b>memory</b></td><td>32.590000</td></tr><tr><td><b>max memory</b></td><td>32.590000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-54949fd3-acf1-4f31-a490-f5a7aff83567';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-a85e5b63-73a7-4028-9013-327a5f7e7b13"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.018s]
  n &lt;= 0
  &amp;&amp; not (m &lt;= 0)
     &amp;&amp; (if m &gt;= 0 then m else 0) &gt;= 0
        &amp;&amp; (if n &gt;= 0 then n else 0) &gt;= 0
           &amp;&amp; (if (m - 1) &gt;= 0 then m - 1 else 0) &gt;= 0
              &amp;&amp; (if 1 &gt;= 0 then 1 else 0) &gt;= 0
  ==&gt; not (1 &lt;= 0 &amp;&amp; not ((m - 1) &lt;= 0))
      &amp;&amp; not (not (1 &lt;= 0) &amp;&amp; not ((m - 1) &lt;= 0))
         &amp;&amp; not (not (1 &lt;= 0) &amp;&amp; not ((m - 1) &lt;= 0))
      || Ordinal.( &lt;&lt; )
         (if [Ordinal.Int (if (m - 1) &gt;= 0 then m - 1 else 0);
              Ordinal.Int (if 1 &gt;= 0 then 1 else 0)]
             = []
          then Ordinal.Int 0
          else
          if true
             &amp;&amp; List.tl
                [Ordinal.Int (if (m - 1) &gt;= 0 then m - 1 else 0);
                 Ordinal.Int (if 1 &gt;= 0 then 1 else 0)]
                = []
          then
            List.hd
            [Ordinal.Int (if (m - 1) &gt;= 0 then m - 1 else 0);
             Ordinal.Int (if 1 &gt;= 0 then 1 else 0)]
          else
          if true
             &amp;&amp; (List.tl
                 [Ordinal.Int (if (m - 1) &gt;= 0 then m - 1 else 0);
                  Ordinal.Int (if 1 &gt;= 0 then 1 else 0)]) &lt;&gt; []
                &amp;&amp; List.tl
                   (List.tl
                    [Ordinal.Int (if (m - 1) &gt;= 0 then m - 1 else 0);
                     Ordinal.Int (if 1 &gt;= 0 then 1 else 0)])
                   = []
          then â€¦ else â€¦)
         (if [Ordinal.Int (if m &gt;= 0 then m else 0);
              Ordinal.Int (if n &gt;= 0 then n else 0)]
             = []
          then Ordinal.Int 0
          else
          if true
             &amp;&amp; List.tl
                [Ordinal.Int (if m &gt;= 0 then m else 0);
                 Ordinal.Int (if n &gt;= 0 then n else 0)]
                = []
          then
            List.hd
            [Ordinal.Int (if m &gt;= 0 then m else 0);
             Ordinal.Int (if n &gt;= 0 then n else 0)]
          else
          if true
             &amp;&amp; (List.tl
                 [Ordinal.Int (if m &gt;= 0 then m else 0);
                  Ordinal.Int (if n &gt;= 0 then n else 0)]) &lt;&gt; []
                &amp;&amp; List.tl
                   (List.tl
                    [Ordinal.Int (if m &gt;= 0 then m else 0);
                     Ordinal.Int (if n &gt;= 0 then n else 0)])
                   = []
          then â€¦ else â€¦)</pre></li><li><div><h5>simplify</h5><div class="imandra-table" id="table-b95d7fdc-759f-44be-83c5-1a9dc64f5cd7"><table><tr><td><b>into</b></td><td><pre>(not
 ((((n &lt;= 0 &amp;&amp; not (m &lt;= 0)) &amp;&amp; (if m &gt;= 0 then m else 0) &gt;= 0)
   &amp;&amp; (if n &gt;= 0 then n else 0) &gt;= 0)
  &amp;&amp; (if m &gt;= 1 then -1 + m else 0) &gt;= 0)
 || m &lt;= 1)
|| Ordinal.( &lt;&lt; )
   (Ordinal.plus (Ordinal.shift (Ordinal.Int â€¦) (Ordinal.Int 1))
    (Ordinal.Int 1))
   (Ordinal.plus (Ordinal.shift (Ordinal.Int â€¦) (Ordinal.Int 1))
    (Ordinal.Int (if n &gt;= 0 then n else 0)))</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-ae1e97ff-2f39-466f-a43b-d05d9780d9c5"><table><tr><td><b>expr</b></td><td><pre>(|Ordinal.shift_127|
  (|Ordinal.Int_93| (ite (&gt;= m_1871 0) m_1871 0))
  (|Ordinal.Int_93| 1))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-51369452-4c66-458a-bc5f-85264b4eb4d5"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (|Ordinal.shift_127|
             (|Ordinal.Int_93| (ite (&gt;= m_1871 0) m_1871 0))
       â€¦</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-5626493c-707c-4bed-b7d4-d8ad7ac51096"><table><tr><td><b>expr</b></td><td><pre>(|Ordinal.shift_127|
  (|Ordinal.Int_93| (ite (&gt;= m_1871 1) (+ (- 1) m_1871) 0))
  (|Ordinal.Int_93|â€¦</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-f0589250-15a5-4f42-b5be-a4a2bcb88e03"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (|Ordinal.shift_127|
             (|Ordinal.Int_93| (ite (&gt;= m_1871 1) (+ (- 1) m_1871) 0â€¦</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-3de41758-50c2-4fd0-83b7-f7e45786b1e7"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (|Ordinal.shift_127|
             (|Ordinal.Int_93| (ite (&gt;= m_1871 1) (+ (- 1) m_1871) 0â€¦</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div><h5>unsat</h5><pre>(let ((a!1 (|Ordinal.shift_127|
             (|Ordinal.Int_93| (ite (&gt;= m_1871 1) (+ (- 1) m_1871) 0â€¦</pre></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-a85e5b63-73a7-4028-9013-327a5f7e7b13';
  fold.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-cda7a18d-0a71-49ff-a905-95677513d42d';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-426793ad-f166-4b6c-8344-50b544543988';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-b78a8417-d89b-44cc-a33a-bb988d4a21ec';
  fold.hydrate(target);
});
</script></div><p></p><div class="imandra-fold panel panel-default" id="fold-154a6e73-3115-41b7-9ada-8ebb52c28119"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>call `ack (m - 1) (ack m (n - 1))` from `ack m n`</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-395119f8-3519-4427-965b-a573027997af"><table><tr><td><b>original</b></td><td>ack m n</td></tr><tr><td><b>sub</b></td><td>ack (m - 1) (ack m (n - 1))</td></tr><tr><td><b>original ordinal</b></td><td>Ordinal.of_list
[Ordinal.Int (if m &gt;= 0 then m else 0); Ordinal.Int (if n &gt;= 0 then n else 0)]</td></tr><tr><td><b>sub ordinal</b></td><td>Ordinal.of_list
[Ordinal.Int (if (m - 1) &gt;= 0 then m - 1 else 0);
 Ordinal.Int (if ack m (n - 1) &gt;= 0 then ack m (n - 1) else 0)]</td></tr><tr><td><b>path</b></td><td>[not (n &lt;= 0) &amp;&amp; not (m &lt;= 0)]</td></tr><tr><td><b>proof</b></td><td><div class="imandra-fold panel panel-default" id="fold-da1203c3-a932-4e46-a99f-ea5dec35acf7"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>detailed proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-82dd72c3-3e28-4fa0-aa50-7fda85fa092c"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-31643d5b-1df6-400f-8999-ccfaf92c07ff"><table><tr><td><b>ground_instances</b></td><td>5</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.017s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-caf40553-cc39-4670-8f28-d7ae1d231ad0"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-650608b1-d7da-490a-be46-414f9d15343b"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-4b61311b-5ab7-4217-a216-dd507e47312f"><table><tr><td><b>num checks</b></td><td>12</td></tr><tr><td><b>arith assert lower</b></td><td>72</td></tr><tr><td><b>arith pivots</b></td><td>20</td></tr><tr><td><b>rlimit count</b></td><td>20578</td></tr><tr><td><b>mk clause</b></td><td>94</td></tr><tr><td><b>datatype occurs check</b></td><td>98</td></tr><tr><td><b>mk bool var</b></td><td>229</td></tr><tr><td><b>arith assert upper</b></td><td>25</td></tr><tr><td><b>datatype splits</b></td><td>8</td></tr><tr><td><b>decisions</b></td><td>129</td></tr><tr><td><b>arith add rows</b></td><td>21</td></tr><tr><td><b>arith bound prop</b></td><td>1</td></tr><tr><td><b>propagations</b></td><td>172</td></tr><tr><td><b>conflicts</b></td><td>21</td></tr><tr><td><b>arith fixed eqs</b></td><td>24</td></tr><tr><td><b>datatype accessor ax</b></td><td>31</td></tr><tr><td><b>arith conflicts</b></td><td>2</td></tr><tr><td><b>arith assert diseq</b></td><td>3</td></tr><tr><td><b>datatype constructor ax</b></td><td>17</td></tr><tr><td><b>num allocs</b></td><td>1723976662</td></tr><tr><td><b>final checks</b></td><td>8</td></tr><tr><td><b>added eqs</b></td><td>189</td></tr><tr><td><b>del clause</b></td><td>38</td></tr><tr><td><b>arith eq adapter</b></td><td>28</td></tr><tr><td><b>memory</b></td><td>32.370000</td></tr><tr><td><b>max memory</b></td><td>32.370000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-caf40553-cc39-4670-8f28-d7ae1d231ad0';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-940c063e-baea-4869-9806-ee725554c2e8"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.017s]
  not (n &lt;= 0)
  &amp;&amp; not (m &lt;= 0)
     &amp;&amp; (if m &gt;= 0 then m else 0) &gt;= 0
        &amp;&amp; (if n &gt;= 0 then n else 0) &gt;= 0
           &amp;&amp; (if (m - 1) &gt;= 0 then m - 1 else 0) &gt;= 0
              &amp;&amp; (if ack m (n - 1) &gt;= 0 then ack m (n - 1) else 0) &gt;= 0
  ==&gt; not (ack m (n - 1) &lt;= 0 &amp;&amp; not ((m - 1) &lt;= 0))
      &amp;&amp; not (not (ack m (n - 1) &lt;= 0) &amp;&amp; not ((m - 1) &lt;= 0))
         &amp;&amp; not (not (ack m (n - 1) &lt;= 0) &amp;&amp; not ((m - 1) &lt;= 0))
      || Ordinal.( &lt;&lt; )
         (if [Ordinal.Int (if (m - 1) &gt;= 0 then m - 1 else 0);
              Ordinal.Int (if ack m (n - 1) &gt;= 0 then ack m (n - 1) else 0)]
             = []
          then Ordinal.Int 0
          else
          if true
             &amp;&amp; List.tl
                [Ordinal.Int (if (m - 1) &gt;= 0 then m - 1 else 0);
                 Ordinal.Int
                 (if ack m (n - 1) &gt;= 0 then ack m (n - 1) else 0)]
                = []
          then
            List.hd
            [Ordinal.Int (if (m - 1) &gt;= 0 then m - 1 else 0);
             Ordinal.Int (if ack m (n - 1) &gt;= 0 then ack m (n - 1) else 0)]
          else
          if true
             &amp;&amp; (List.tl
                 [Ordinal.Int (if (m - 1) &gt;= 0 then m - 1 else 0);
                  Ordinal.Int
                  (if ack m (n - 1) &gt;= 0 then ack m (n - 1) else 0)]) &lt;&gt; []
                &amp;&amp; List.tl
                   (List.tl
                    [Ordinal.Int (if (m - 1) &gt;= 0 then m - 1 else 0);
                     Ordinal.Int
                     (if ack m (n - 1) &gt;= 0 then ack m (n - 1) else 0)])
                   = []
          then â€¦ else â€¦)
         (if [Ordinal.Int (if m &gt;= 0 then m else 0);
              Ordinal.Int (if n &gt;= 0 then n else 0)]
             = []
          then Ordinal.Int 0
          else
          if true
             &amp;&amp; List.tl
                [Ordinal.Int (if m &gt;= 0 then m else 0);
                 Ordinal.Int (if n &gt;= 0 then n else 0)]
                = []
          then
            List.hd
            [Ordinal.Int (if m &gt;= 0 then m else 0);
             Ordinal.Int (if n &gt;= 0 then n else 0)]
          else
          if true
             &amp;&amp; (List.tl
                 [Ordinal.Int (if m &gt;= 0 then m else 0);
                  Ordinal.Int (if n &gt;= 0 then n else 0)]) &lt;&gt; []
                &amp;&amp; List.tl
                   (List.tl
                    [Ordinal.Int (if m &gt;= 0 then m else 0);
                     Ordinal.Int (if n &gt;= 0 then n else 0)])
                   = []
          then â€¦ else â€¦)</pre></li><li><div><h5>simplify</h5><div class="imandra-table" id="table-7372ee29-28a8-4a1b-b368-d7fc5ba3f0ef"><table><tr><td><b>into</b></td><td><pre>(not
 (((((not (n &lt;= 0) &amp;&amp; not (m &lt;= 0)) &amp;&amp; (if m &gt;= 0 then m else 0) &gt;= 0)
    &amp;&amp; (if n &gt;= 0 then n else 0) &gt;= 0)
   &amp;&amp; (if m &gt;= 1 then -1 + m else 0) &gt;= 0)
  &amp;&amp; (if ack m (-1 + n) &gt;= 0 then ack m (-1 + n) else 0) &gt;= 0)
 || not (ack m (-1 + n) &lt;= 0 &amp;&amp; not (m &lt;= 1))
    &amp;&amp; not (not (ack m (-1 + n) &lt;= 0) &amp;&amp; not (m &lt;= 1)))
|| Ordinal.( &lt;&lt; )
   (Ordinal.plus (Ordinal.shift (Ordinal.Int â€¦) (Ordinal.Int 1))
    (Ordinal.Int (if ack m (-1 + n) &gt;= 0 then ack m (-1 + n) else 0)))
   (Ordinal.plus (Ordinal.shift (Ordinal.Int â€¦) (Ordinal.Int 1))
    (Ordinal.Int (if n &gt;= 0 then n else 0)))</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-e6db6121-45c8-4324-8a84-3165805d6205"><table><tr><td><b>expr</b></td><td><pre>(|Ordinal.shift_127|
  (|Ordinal.Int_93| (ite (&gt;= m_1871 0) m_1871 0))
  (|Ordinal.Int_93| 1))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-de775ccc-6ba2-4e06-bc60-4c8e8bf024ac"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (|Ordinal.shift_127|
             (|Ordinal.Int_93| (ite (&gt;= m_1871 0) m_1871 0))
       â€¦</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-3700f4e2-3f4f-4c72-9e86-b96f6faeae83"><table><tr><td><b>expr</b></td><td><pre>(|Ordinal.shift_127|
  (|Ordinal.Int_93| (ite (&gt;= m_1871 1) (+ (- 1) m_1871) 0))
  (|Ordinal.Int_93|â€¦</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-3785ff94-9552-4a15-bbf8-84baeb8e9213"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (|Ordinal.shift_127|
             (|Ordinal.Int_93| (ite (&gt;= m_1871 1) (+ (- 1) m_1871) 0â€¦</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-de116a70-b638-4290-8259-d5adf223174d"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (|Ordinal.shift_127|
             (|Ordinal.Int_93| (ite (&gt;= m_1871 1) (+ (- 1) m_1871) 0â€¦</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div><h5>unsat</h5><pre>(let ((a!1 (|Ordinal.shift_127|
             (|Ordinal.Int_93| (ite (&gt;= m_1871 1) (+ (- 1) m_1871) 0â€¦</pre></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-940c063e-baea-4869-9806-ee725554c2e8';
  fold.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-82dd72c3-3e28-4fa0-aa50-7fda85fa092c';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-da1203c3-a932-4e46-a99f-ea5dec35acf7';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-154a6e73-3115-41b7-9ada-8ebb52c28119';
  fold.hydrate(target);
});
</script></div><p></p><div class="imandra-fold panel panel-default" id="fold-dc0b9c93-4f37-4de1-9cb1-e353fd61bec6"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>call `ack m (n - 1)` from `ack m n`</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-778591a7-f0e0-4df7-a0f4-7ea164760574"><table><tr><td><b>original</b></td><td>ack m n</td></tr><tr><td><b>sub</b></td><td>ack m (n - 1)</td></tr><tr><td><b>original ordinal</b></td><td>Ordinal.of_list
[Ordinal.Int (if m &gt;= 0 then m else 0); Ordinal.Int (if n &gt;= 0 then n else 0)]</td></tr><tr><td><b>sub ordinal</b></td><td>Ordinal.of_list
[Ordinal.Int (if m &gt;= 0 then m else 0);
 Ordinal.Int (if (n - 1) &gt;= 0 then n - 1 else 0)]</td></tr><tr><td><b>path</b></td><td>[not (n &lt;= 0) &amp;&amp; not (m &lt;= 0)]</td></tr><tr><td><b>proof</b></td><td><div class="imandra-fold panel panel-default" id="fold-61102e82-1dea-43ed-96d8-1b6080e68d6e"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>detailed proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-b3c377ca-d4a9-47bd-9c87-f9c95b6e912f"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-e8a3bafc-bcbb-4110-b096-65b6e695aeae"><table><tr><td><b>ground_instances</b></td><td>7</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.026s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-4490d869-3fea-4ff9-939b-40864dd984d4"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-0d2900ba-223b-48e4-89c2-591cd1dc4e8b"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-01867702-3a12-4972-b61e-1085b57893e2"><table><tr><td><b>arith offset eqs</b></td><td>3</td></tr><tr><td><b>num checks</b></td><td>16</td></tr><tr><td><b>arith assert lower</b></td><td>21</td></tr><tr><td><b>arith pivots</b></td><td>11</td></tr><tr><td><b>rlimit count</b></td><td>11912</td></tr><tr><td><b>mk clause</b></td><td>120</td></tr><tr><td><b>datatype occurs check</b></td><td>175</td></tr><tr><td><b>mk bool var</b></td><td>295</td></tr><tr><td><b>arith assert upper</b></td><td>17</td></tr><tr><td><b>datatype splits</b></td><td>23</td></tr><tr><td><b>decisions</b></td><td>180</td></tr><tr><td><b>arith add rows</b></td><td>19</td></tr><tr><td><b>arith bound prop</b></td><td>2</td></tr><tr><td><b>propagations</b></td><td>151</td></tr><tr><td><b>conflicts</b></td><td>20</td></tr><tr><td><b>arith fixed eqs</b></td><td>13</td></tr><tr><td><b>datatype accessor ax</b></td><td>49</td></tr><tr><td><b>arith conflicts</b></td><td>1</td></tr><tr><td><b>arith assert diseq</b></td><td>1</td></tr><tr><td><b>datatype constructor ax</b></td><td>30</td></tr><tr><td><b>num allocs</b></td><td>1677707738</td></tr><tr><td><b>final checks</b></td><td>13</td></tr><tr><td><b>added eqs</b></td><td>229</td></tr><tr><td><b>del clause</b></td><td>80</td></tr><tr><td><b>arith eq adapter</b></td><td>15</td></tr><tr><td><b>memory</b></td><td>29.110000</td></tr><tr><td><b>max memory</b></td><td>31.910000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-4490d869-3fea-4ff9-939b-40864dd984d4';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-c5afb5c0-4beb-4710-abd6-f0502192f680"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.026s]
  not (n &lt;= 0)
  &amp;&amp; not (m &lt;= 0)
     &amp;&amp; (if m &gt;= 0 then m else 0) &gt;= 0
        &amp;&amp; (if n &gt;= 0 then n else 0) &gt;= 0
           &amp;&amp; (if m &gt;= 0 then m else 0) &gt;= 0
              &amp;&amp; (if (n - 1) &gt;= 0 then n - 1 else 0) &gt;= 0
  ==&gt; not ((n - 1) &lt;= 0 &amp;&amp; not (m &lt;= 0))
      &amp;&amp; not (not ((n - 1) &lt;= 0) &amp;&amp; not (m &lt;= 0))
         &amp;&amp; not (not ((n - 1) &lt;= 0) &amp;&amp; not (m &lt;= 0))
      || Ordinal.( &lt;&lt; )
         (if [Ordinal.Int (if m &gt;= 0 then m else 0);
              Ordinal.Int (if (n - 1) &gt;= 0 then n - 1 else 0)]
             = []
          then Ordinal.Int 0
          else
          if true
             &amp;&amp; List.tl
                [Ordinal.Int (if m &gt;= 0 then m else 0);
                 Ordinal.Int (if (n - 1) &gt;= 0 then n - 1 else 0)]
                = []
          then
            List.hd
            [Ordinal.Int (if m &gt;= 0 then m else 0);
             Ordinal.Int (if (n - 1) &gt;= 0 then n - 1 else 0)]
          else
          if true
             &amp;&amp; (List.tl
                 [Ordinal.Int (if m &gt;= 0 then m else 0);
                  Ordinal.Int (if (n - 1) &gt;= 0 then n - 1 else 0)]) &lt;&gt; []
                &amp;&amp; List.tl
                   (List.tl
                    [Ordinal.Int (if m &gt;= 0 then m else 0);
                     Ordinal.Int (if (n - 1) &gt;= 0 then n - 1 else 0)])
                   = []
          then â€¦ else â€¦)
         (if [Ordinal.Int (if m &gt;= 0 then m else 0);
              Ordinal.Int (if n &gt;= 0 then n else 0)]
             = []
          then Ordinal.Int 0
          else
          if true
             &amp;&amp; List.tl
                [Ordinal.Int (if m &gt;= 0 then m else 0);
                 Ordinal.Int (if n &gt;= 0 then n else 0)]
                = []
          then
            List.hd
            [Ordinal.Int (if m &gt;= 0 then m else 0);
             Ordinal.Int (if n &gt;= 0 then n else 0)]
          else
          if true
             &amp;&amp; (List.tl
                 [Ordinal.Int (if m &gt;= 0 then m else 0);
                  Ordinal.Int (if n &gt;= 0 then n else 0)]) &lt;&gt; []
                &amp;&amp; List.tl
                   (List.tl
                    [Ordinal.Int (if m &gt;= 0 then m else 0);
                     Ordinal.Int (if n &gt;= 0 then n else 0)])
                   = []
          then â€¦ else â€¦)</pre></li><li><div><h5>simplify</h5><div class="imandra-table" id="table-ea4b81ea-a580-438a-8f15-6f9cc4aaff93"><table><tr><td><b>into</b></td><td><pre>(not
 ((((not (n &lt;= 0) &amp;&amp; not (m &lt;= 0)) &amp;&amp; (if m &gt;= 0 then m else 0) &gt;= 0)
   &amp;&amp; (if n &gt;= 0 then n else 0) &gt;= 0)
  &amp;&amp; (if n &gt;= 1 then -1 + n else 0) &gt;= 0)
 || not (n &lt;= 1 &amp;&amp; not (m &lt;= 0)) &amp;&amp; not (not (n &lt;= 1) &amp;&amp; not (m &lt;= 0)))
|| Ordinal.( &lt;&lt; )
   (Ordinal.plus (Ordinal.shift (Ordinal.Int â€¦) (Ordinal.Int 1))
    (Ordinal.Int (if n &gt;= 1 then -1 + n else 0)))
   (Ordinal.plus (Ordinal.shift (Ordinal.Int â€¦) (Ordinal.Int 1))
    (Ordinal.Int (if n &gt;= 0 then n else 0)))</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-66807fb5-4611-42fa-9298-bfa18e64a09a"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (|Ordinal.shift_127|
             (|Ordinal.Int_93| (ite (&gt;= m_1871 0) m_1871 0))
       â€¦</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-14b26edd-c49f-43b7-938a-9142a40a8de1"><table><tr><td><b>expr</b></td><td><pre>(|Ordinal.shift_127|
  (|Ordinal.Int_93| (ite (&gt;= m_1871 0) m_1871 0))
  (|Ordinal.Int_93| 1))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-b33325ef-5e19-40e6-ae7d-e05bc5d2a680"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (|Ordinal.shift_127|
             (|Ordinal.Int_93| (ite (&gt;= m_1871 0) m_1871 0))
       â€¦</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-17972a7d-f3f1-42eb-ae6e-9f6393c76ead"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (|Ordinal.shift_127|
             (|Ordinal.Int_93| (ite (&gt;= m_1871 0) m_1871 0))
       â€¦</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-1bbf9750-cd9f-41a6-8e24-077356d7e78f"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (|Ordinal.shift_127|
             (|Ordinal.Int_93| (ite (&gt;= m_1871 0) m_1871 0))
       â€¦</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-41110d58-8b6b-44da-a641-c11163483599"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (|Ordinal.shift_127|
             (|Ordinal.Int_93| (ite (&gt;= m_1871 0) m_1871 0))
       â€¦</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-0a1ae77c-ba91-4c1e-9865-21894e383071"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (|Ordinal.shift_127|
             (|Ordinal.Int_93| (ite (&gt;= m_1871 0) m_1871 0))
       â€¦</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div><h5>unsat</h5><pre>(let ((a!1 (|Ordinal.shift_127|
             (|Ordinal.Int_93| (ite (&gt;= m_1871 0) m_1871 0))
       â€¦</pre></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-c5afb5c0-4beb-4710-abd6-f0502192f680';
  fold.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-b3c377ca-d4a9-47bd-9c87-f9c95b6e912f';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-61102e82-1dea-43ed-96d8-1b6080e68d6e';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-dc0b9c93-4f37-4de1-9cb1-e353fd61bec6';
  fold.hydrate(target);
});
</script></div><p></p></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-7ad70ced-eb8b-46d0-afd9-5735ec9ce8a2';
  fold.hydrate(target);
});
</script></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>Success! You may enjoy walking through Imandra's termination proof presented in the document above.</p>
<h1 id="Measures-and-Ordinals">Measures and Ordinals<a class="anchor-link" href="#Measures-and-Ordinals">&#182;</a></h1><p>If a lexicographic ordering isn't sufficient to prove termination for your function, you may need to construct a custom <em>measure function</em>.</p>
<p>A measure function is <em>ordinal valued</em>, meaning it returns a value of type <code>Ordinal.t</code>.</p>
<p>Imandra's <code>Ordinal</code> module comes with helpful tools for constructing ordinals.</p>
<p>Let's view its contents with the <code>#show</code> directive:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-37" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="o">#</span><span class="n">show</span> <span class="nc">Ordinal</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[20]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>module Ordinal :
  sig
    type t = Int of int | Cons of t * int * t
    val pp : Format.formatter -&gt; t -&gt; unit
    val of_int : int -&gt; t
    val ( ~$ ) : int -&gt; t
    val ( &lt;&lt; ) : t -&gt; t -&gt; bool
    val plus : t -&gt; t -&gt; t
    val simple_plus : t -&gt; t -&gt; t
    val ( + ) : t -&gt; t -&gt; t
    val of_list : t list -&gt; t
    val pair : t -&gt; t -&gt; t
    val triple : t -&gt; t -&gt; t -&gt; t
    val quad : t -&gt; t -&gt; t -&gt; t -&gt; t
    val shift : t -&gt; by:t -&gt; t
    val is_valid : t -&gt; bool
    val zero : t
    val one : t
    val omega : t
    val omega_omega : t
  end
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>Even though ordinals like $\omega$ are infinite, we may still compute with them in Imandra.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-39" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="nn">Ordinal</span><span class="p">.</span><span class="n">omega</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[21]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>- : Ordinal.t = Ï‰
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-40" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[22]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="nn">Ordinal</span><span class="p">.</span><span class="o">(</span><span class="n">omega</span> <span class="o">+</span> <span class="n">omega</span><span class="o">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[22]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>- : Ordinal.t = 2Â·Ï‰
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-41" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[23]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="n">o1</span> <span class="o">=</span> <span class="nn">Ordinal</span><span class="p">.</span><span class="o">(</span><span class="n">omega</span> <span class="o">+</span> <span class="n">omega_omega</span> <span class="o">+</span> <span class="n">shift</span> <span class="n">omega</span> <span class="o">~</span><span class="n">by</span><span class="o">:(</span><span class="n">omega</span> <span class="o">+</span> <span class="n">one</span><span class="o">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[23]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val o1 : Ordinal.t = Ï‰^(Ï‰ + 1)
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-42" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[24]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="nn">Ordinal</span><span class="p">.</span><span class="o">(</span><span class="n">o1</span> <span class="o">&lt;&lt;</span> <span class="n">omega_omega</span><span class="o">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[24]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>- : bool = false
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>Ordinals are fundamental to program termination because they represent <a href="https://en.wikipedia.org/wiki/Well-founded_relation">well-founded orderings</a> (<a href="https://en.wikipedia.org/wiki/Well-order">well-orders</a>).</p>
<p>If we can prove that a function's recursive calls always get <em>smaller</em> with respect to some well-founded ordering, then we know the function will always terminate.</p>
<p>The fundamental well-founded relation in Imandra is <code>Ordinal.(&lt;&lt;)</code>. This is the strict, well-founded ordering relation on the ordinals up to <a href="https://en.wikipedia.org/wiki/Epsilon_numbers_%28mathematics%29">$\epsilon_0$</a>:</p>
<p><img src="https://wikimedia.org/api/rest_v1/media/math/render/svg/4bf299b77978d2c51140c0a66c60d91d04e11de9"></p>
<p>Let's consider an example famous recursive function that we can't admit with a lexicographic order and see how we can write our own measure function and communicate it to Imandra.</p>
<h1 id="Left-pad">Left pad<a class="anchor-link" href="#Left-pad">&#182;</a></h1><p>Consider the following function <code>left_pad</code>:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<pre><code>let rec left_pad c n xs =
  if List.length xs &gt;= n then
    xs
  else
    left_pad c n (c :: xs)</code></pre>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>If we give this function to Imandra without any hints, it will not be able to prove it terminating.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-46" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[25]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">left_pad</span> <span class="n">c</span> <span class="n">n</span> <span class="n">xs</span> <span class="o">=</span>
  <span class="k">if</span> <span class="nn">List</span><span class="p">.</span><span class="n">length</span> <span class="n">xs</span> <span class="o">&gt;=</span> <span class="n">n</span> <span class="k">then</span>
    <span class="n">xs</span>
  <span class="k">else</span>
    <span class="n">left_pad</span> <span class="n">c</span> <span class="n">n</span> <span class="o">(</span><span class="n">c</span> <span class="o">::</span> <span class="n">xs</span><span class="o">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[25]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val left_pad : &#39;a -&gt; int -&gt; &#39;a list -&gt; &#39;a list = &lt;fun&gt;
File &#34;jupyter cell 25&#34;, line 1, characters 0-96:
<span class="ansi-red-intense-fg ansi-bold">Error</span>: rejected definition for function left_pad,
Imandra could not prove termination. 
hint: problematic sub-call from `left_pad c n xs` to `left_pad c n (c :: xs)`
 under path not (List.length xs &gt;= n) is not decreasing
(measured subset: (xs))
See https://docs.imandra.ai/imandra-docs/notebooks/proving-program-termination/
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>Why does this function terminate? If we think about it, we can realise that it terminates because in each recursive call, the quantity <code>n - List.length xs</code> is getting smaller. Moreover, under the guards governing the recursive calls, this quantity is always non-negative. So, let's construct an ordinal-valued measure function to express this:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-48" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[26]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="n">left_pad_measure</span> <span class="n">n</span> <span class="n">xs</span> <span class="o">=</span>
  <span class="nn">Ordinal</span><span class="p">.</span><span class="n">of_int</span> <span class="o">(</span><span class="n">n</span> <span class="o">-</span> <span class="nn">List</span><span class="p">.</span><span class="n">length</span> <span class="n">xs</span><span class="o">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[26]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val left_pad_measure : Z.t -&gt; &#39;a list -&gt; Ordinal.t = &lt;fun&gt;
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>We can compute with this function, to really see it does what we want:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-50" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[27]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="n">left_pad_measure</span> <span class="mi">5</span> <span class="o">[</span><span class="mi">1</span><span class="o">;</span><span class="mi">2</span><span class="o">;</span><span class="mi">3</span><span class="o">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[27]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>- : Ordinal.t = 2
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>Finally, we can give it to Imandra as the <code>measure</code> to use in proving <code>left_pad</code> terminates:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-52" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[28]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">left_pad</span> <span class="n">c</span> <span class="n">n</span> <span class="n">xs</span> <span class="o">=</span>
  <span class="k">if</span> <span class="nn">List</span><span class="p">.</span><span class="n">length</span> <span class="n">xs</span> <span class="o">&gt;=</span> <span class="n">n</span> <span class="k">then</span>
    <span class="n">xs</span>
  <span class="k">else</span>
    <span class="n">left_pad</span> <span class="n">c</span> <span class="n">n</span> <span class="o">(</span><span class="n">c</span> <span class="o">::</span> <span class="n">xs</span><span class="o">)</span>
<span class="o">[@@</span><span class="n">measure</span> <span class="n">left_pad_measure</span> <span class="n">n</span> <span class="n">xs</span><span class="o">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[28]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>val left_pad : &#39;a -&gt; int -&gt; &#39;a list -&gt; &#39;a list = &lt;fun&gt;
</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div class="imandra-fold panel panel-default" id="fold-bb8135a1-1706-42ec-8fca-ac7640e14d0e"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>termination proof</span></div></div><div class="panel-body collapse"><div><h3>Termination proof</h3><p></p><div class="imandra-fold panel panel-default" id="fold-ce668e5e-2951-4744-b0b8-dc7536e0d006"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>call `left_pad c n (c :: xs)` from `left_pad c n xs`</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-b8742ff4-f0a6-478b-a2ab-15d90819aac4"><table><tr><td><b>original</b></td><td>left_pad c n xs</td></tr><tr><td><b>sub</b></td><td>left_pad c n (c :: xs)</td></tr><tr><td><b>original ordinal</b></td><td>left_pad_measure n xs</td></tr><tr><td><b>sub ordinal</b></td><td>left_pad_measure n (c :: xs)</td></tr><tr><td><b>path</b></td><td>[not (List.length xs &gt;= n)]</td></tr><tr><td><b>proof</b></td><td><div class="imandra-fold panel panel-default" id="fold-3bfecd87-43bc-4319-a015-7dcee2e83dee"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>detailed proof</span></div></div><div class="panel-body collapse"><div class="imandra-proof"><div class="imandra-alternatives" id="alt-83b1ebf8-489d-4a4a-a93f-4568d072606f"><ul class="nav nav-tabs"><li class="active" data-toggle="tab"><a>summary</a></li><li class="" data-toggle="tab"><a>full</a></li></ul><div class="tab-content"><div class="tab-pane active"><div class="imandra-table" id="table-a7c7552f-f338-415f-9dd2-38e5bdd7f72f"><table><tr><td><b>ground_instances</b></td><td>2</td></tr><tr><td><b>definitions</b></td><td>0</td></tr><tr><td><b>inductions</b></td><td>0</td></tr><tr><td><b>search_time</b></td><td><pre>0.013s</pre></td></tr><tr><td><b>details</b></td><td><div class="imandra-fold panel panel-default" id="fold-1b7b6f70-c95d-49d3-a1b7-7e2fbee9d799"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-4831975f-7498-49f4-948f-9113616be90d"><table><tr><td><b>smt_stats</b></td><td><div class="imandra-table" id="table-f0867c42-f27a-445f-89a8-509c617fc72f"><table><tr><td><b>num checks</b></td><td>5</td></tr><tr><td><b>arith assert lower</b></td><td>9</td></tr><tr><td><b>arith pivots</b></td><td>5</td></tr><tr><td><b>rlimit count</b></td><td>2080</td></tr><tr><td><b>mk clause</b></td><td>7</td></tr><tr><td><b>datatype occurs check</b></td><td>16</td></tr><tr><td><b>mk bool var</b></td><td>35</td></tr><tr><td><b>arith assert upper</b></td><td>6</td></tr><tr><td><b>datatype splits</b></td><td>2</td></tr><tr><td><b>decisions</b></td><td>6</td></tr><tr><td><b>arith add rows</b></td><td>13</td></tr><tr><td><b>propagations</b></td><td>4</td></tr><tr><td><b>conflicts</b></td><td>3</td></tr><tr><td><b>arith fixed eqs</b></td><td>2</td></tr><tr><td><b>datatype accessor ax</b></td><td>5</td></tr><tr><td><b>arith conflicts</b></td><td>1</td></tr><tr><td><b>datatype constructor ax</b></td><td>2</td></tr><tr><td><b>num allocs</b></td><td>2087941281</td></tr><tr><td><b>final checks</b></td><td>4</td></tr><tr><td><b>added eqs</b></td><td>13</td></tr><tr><td><b>del clause</b></td><td>4</td></tr><tr><td><b>arith eq adapter</b></td><td>3</td></tr><tr><td><b>memory</b></td><td>27.410000</td></tr><tr><td><b>max memory</b></td><td>32.590000</td></tr></table></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-1b7b6f70-c95d-49d3-a1b7-7e2fbee9d799';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><div class="tab-pane"><div class="imandra-fold panel panel-default" id="fold-71f96504-ecd2-47e8-b4d2-9e6ebbb88eb2"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><ul><li><pre>start[0.013s]
  not (List.length xs &gt;= n)
  &amp;&amp; (if (n - List.length xs) &gt;= 0 then n - List.length xs else 0) &gt;= 0
     &amp;&amp; (if (n - List.length (â€¦ :: xs)) &gt;= 0
         then n - List.length (â€¦ :: xs) else 0)
        &gt;= 0
  ==&gt; List.length (â€¦ :: xs) &gt;= n
      || Ordinal.( &lt;&lt; )
         (Ordinal.Int
          (if (n - List.length (â€¦ :: xs)) &gt;= 0
           then n - List.length (â€¦ :: xs) else 0))
         (Ordinal.Int
          (if (n - List.length xs) &gt;= 0 then n - List.length xs else 0))</pre></li><li><div><h5>simplify</h5><div class="imandra-table" id="table-fa312cc6-284f-4ae1-8a80-85fd2f767c8e"><table><tr><td><b>into</b></td><td><pre>(not
 ((not (List.length xs &gt;= n)
   &amp;&amp; (if (n + -1 * List.length xs) &gt;= 0 then n + -1 * List.length xs else 0)
      &gt;= 0)
  &amp;&amp; (if (n + -1 * List.length (c :: xs)) &gt;= 0
      then n + -1 * List.length (c :: xs) else 0)
     &gt;= 0)
 || List.length (c :: xs) &gt;= n)
|| Ordinal.( &lt;&lt; )
   (Ordinal.Int
    (if (n + -1 * List.length (c :: xs)) &gt;= 0
     then n + -1 * List.length (c :: xs) else 0))
   (Ordinal.Int
    (if (n + -1 * List.length xs) &gt;= 0 then n + -1 * List.length xs else 0))</pre></td></tr><tr><td><b>expansions</b></td><td><pre>[]</pre></td></tr><tr><td><b>rewrite_steps</b></td><td><ul></ul></td></tr><tr><td><b>forward_chaining</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-479205dd-214a-4b8b-915f-70ab9bbe8217"><table><tr><td><b>expr</b></td><td><pre>(let ((a!1 (+ n_2004 (* (- 1) (|List.length_2000| (|::_3| c_2003 xs_2005)))))
      (a!2 (&gt;= (+ n_20â€¦</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div>unroll<div class="imandra-table" id="table-12e1ba0f-5782-42f6-bbc0-8780a5e55c6d"><table><tr><td><b>expr</b></td><td><pre>(|List.length_2000| (|::_3| c_2003 xs_2005))</pre></td></tr><tr><td><b>expansions</b></td><td><ul></ul></td></tr></table></div></div></li><li><div><h5>unsat</h5><pre>(let ((a!1 (ite (&lt;= (+ (|List.length_2000| xs_2005) (* (- 1) n_2004)) 0)
                (+ (* (- 1)â€¦</pre></div></li></ul></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-71f96504-ecd2-47e8-b4d2-9e6ebbb88eb2';
  fold.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/alternatives'], function (alternatives) {
  var target = '#alt-83b1ebf8-489d-4a4a-a93f-4568d072606f';
  alternatives.hydrate(target);
});
</script></div></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-3bfecd87-43bc-4319-a015-7dcee2e83dee';
  fold.hydrate(target);
});
</script></div></td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-ce668e5e-2951-4744-b0b8-dc7536e0d006';
  fold.hydrate(target);
});
</script></div><p></p></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-bb8135a1-1706-42ec-8fca-ac7640e14d0e';
  fold.hydrate(target);
});
</script></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>Success! Note also how we only used two of <code>left_pad</code>'s three arguments in our measure. In general, economical measures are good, as they give us smaller <em>measured subsets</em>, which allow us to simplify more symbolic instances of our recursive functions during proof search. Moreover, they also affect how Imandra is able to use its <code>functional induction</code> (a.k.a. <code>recursion induction</code>) schemes.</p>
<p>We can find out the measured subset (and much other data) about our functions through the <code>#history</code> directive. It's also available with the handy alias <code>#h</code>:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="try-this-container">
  <a href="https://try.imandra.ai/launch/?next=/h/user-redirect/notebooks/Proving%20Program%20Termination%20with%20Imandra.ipynb%23try-cell-54" target="_blank" rel="nofollow">
    <div class="try-this">Try this!</div>
  </a>
</div>
<div class="input">
<div class="prompt input_prompt">In&nbsp;[29]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ocaml"><pre><span></span><span class="o">#</span><span class="n">history</span> <span class="n">left_pad</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[29]:</div>




<div class="output_text output_subarea output_execute_result">
<pre></pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div><div><h3>Fun: left_pad</h3><div class="imandra-table" id="table-852e65a6-a575-41d8-9961-529279cd9b10"><table><tr><td><b>iml</b></td><td><div class="imandra-fold panel panel-default" id="fold-92f62201-57af-4fdb-b7bd-a70331c62f44"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>definition</span></div></div><div class="panel-body collapse"><pre>fun (c : 'a) -&gt;
 fun (n : int) -&gt;
  fun (xs : 'a list) -&gt;
   if List.length xs &gt;= n then xs else left_pad c n (c :: xs)</pre></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-92f62201-57af-4fdb-b7bd-a70331c62f44';
  fold.hydrate(target);
});
</script></div></td></tr><tr><td><b>def</b></td><td><div class="imandra-table" id="table-2728b60a-26b5-4554-a250-3a1024efeec1"><table><tr><td><b>name</b></td><td>left_pad</td></tr><tr><td><b>type</b></td><td>'a -&gt; int -&gt; 'a list -&gt; 'a list</td></tr><tr><td><b>recursive</b></td><td>true</td></tr><tr><td><b>def-depth</b></td><td>4</td></tr><tr><td><b>def-ty-depth</b></td><td>2</td></tr><tr><td><b>call signature</b></td><td>left_pad (c : 'a) (n : int) (xs : 'a list)</td></tr><tr><td><b>measured subset</b></td><td>[n; xs]</td></tr><tr><td><b>parametric</b></td><td>true</td></tr><tr><td><b>sub-function(s)</b></td><td><div class="imandra-fold panel panel-default" id="fold-d83ba95c-4f4b-4de1-9f5a-fa487c8cad56"><div class="panel-heading"><div><i class="fa fa-chevron-down hidden"></i><i class="fa fa-chevron-right"></i><span>Expand</span></div></div><div class="panel-body collapse"><div class="imandra-table" id="table-eaaac390-6c5a-4172-8c45-08ba6f80602e"><table><tr><td><b>name</b></td><td>measure_fun.left_pad</td></tr><tr><td><b>type</b></td><td>int -&gt; 'b list -&gt; Ordinal.t</td></tr><tr><td><b>recursive</b></td><td>false</td></tr><tr><td><b>def-depth</b></td><td>6</td></tr><tr><td><b>def-ty-depth</b></td><td>2</td></tr><tr><td><b>call signature</b></td><td>measure_fun.left_pad (n : int) (xs : 'b list)</td></tr><tr><td><b>body</b></td><td><pre>left_pad_measure n xs</pre></td></tr><tr><td><b>parametric</b></td><td>true</td></tr><tr><td><b>validated</b></td><td>in 0.000s</td></tr><tr><td><b>location</b></td><td>jupyter cell 28:1,0--130</td></tr></table></div></div><script>
require(['nbextensions/nbimandra/fold'], function (fold) {
  var target = '#fold-d83ba95c-4f4b-4de1-9f5a-fa487c8cad56';
  fold.hydrate(target);
});
</script></div></td></tr><tr><td><b>validated</b></td><td>in 0.000s</td></tr><tr><td><b>location</b></td><td>jupyter cell 28:1,0--130</td></tr><tr><td><b>hashes</b></td><td><div class="imandra-table" id="table-f67c60bb-9107-44c3-8f94-9871b7868191"><table><tr><td><b>left_pad</b></td><td>lHG22/z0VB326FWHa7STUBXWgbT0va3vKkx56+LfH6o</td></tr><tr><td><b>measure_fun.left_pad</b></td><td>EjihzXAYEX6jIXIH+cwxHQRVlWwrNp9N3s2L1QIzeNk</td></tr></table></div></td></tr></table></div></td></tr></table></div></div></div>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html"><p>Excellent! This concludes our brief introduction to program termination in Imandra.</p>
</div>
</div>
</div>
                    </div>
                </article>
            </main>
            <footer class="footer">
                <a class="copyrights"href="http://imandra.ai">&#9400; 2018 - 2020 Imandra Inc. All rights reserved.</a>
            </footer>
        </div>
    
 


    <script>
    (function () {
            var lastId;
            var sideMenu = $("#side-nav-menu");
            var topMenu = $("#top-menu");
            var topMenuHeight = topMenu.outerHeight() + 15;

            // All list items
            var menuItems = sideMenu.find('a.side__nav-link--within-page');

            // Anchors corresponding to menu items
            var scrollItems = menuItems.map(function () {
              var item = $(this).attr("href");
              var thisItem = item.substring(item.lastIndexOf("#") + 1, item.length);
              var linkedItem = $('#' + CSS.escape(thisItem));
              if (linkedItem.length) { return linkedItem; }
            });

            // Bind to scroll
            $(window).scroll(function () {
                // Get container scroll position
                var fromTop = $(this).scrollTop() + topMenuHeight;;
                // Get id of current scroll item
                var cur = scrollItems.map(function () {
                    if ($(this).offset().top < fromTop)
                        return this;
                });
                cur = cur[cur.length - 1];
                // Get the id of the current element
                var id = cur && cur.length ? cur[0].id : "";
                if (id && lastId !== id) {
                    lastId = id;
                    // Set/remove active class
                    menuItems.each(function (idx, item) {
                      var $item = $(item);
                      $item.removeClass("side__nav-link--within-page--active");

                      if (item.href.endsWith('#' + lastId)) {
                        $item.addClass("side__nav-link--within-page--active");
                      };
                    });
                }
            });
        })()
    </script>
    <script type="text/javascript"> docsearch({
      apiKey: 'ff3a61a82b58783e62ebfbf51e50b0bc',
      indexName: 'imandra',
      inputSelector: '#search',
      debug: false // Set debug to true if you want to inspect the dropdown
    });
    </script>

    </body>
</html>
